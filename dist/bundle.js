(()=>{"use strict";var t={56:(t,e,r)=>{t.exports=function(t){var e=r.nc;e&&t.setAttribute("nonce",e)}},72:t=>{var e=[];function r(t){for(var r=-1,n=0;n<e.length;n++)if(e[n].identifier===t){r=n;break}return r}function n(t,n){for(var s={},a=[],i=0;i<t.length;i++){var c=t[i],l=n.base?c[0]+n.base:c[0],u=s[l]||0,p="".concat(l," ").concat(u);s[l]=u+1;var d=r(p),h={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==d)e[d].references++,e[d].updater(h);else{var m=o(h,n);n.byIndex=i,e.splice(i,0,{identifier:p,updater:m,references:1})}a.push(p)}return a}function o(t,e){var r=e.domAPI(e);return r.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;r.update(t=e)}else r.remove()}}t.exports=function(t,o){var s=n(t=t||[],o=o||{});return function(t){t=t||[];for(var a=0;a<s.length;a++){var i=r(s[a]);e[i].references--}for(var c=n(t,o),l=0;l<s.length;l++){var u=r(s[l]);0===e[u].references&&(e[u].updater(),e.splice(u,1))}s=c}}},89:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var r="",n=void 0!==e[5];return e[4]&&(r+="@supports (".concat(e[4],") {")),e[2]&&(r+="@media ".concat(e[2]," {")),n&&(r+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),r+=t(e),n&&(r+="}"),e[2]&&(r+="}"),e[4]&&(r+="}"),r}).join("")},e.i=function(t,r,n,o,s){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(n)for(var i=0;i<this.length;i++){var c=this[i][0];null!=c&&(a[c]=!0)}for(var l=0;l<t.length;l++){var u=[].concat(t[l]);n&&a[u[0]]||(void 0!==s&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=s),r&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=r):u[2]=r),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),e.push(u))}},e}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},659:t=>{var e={};t.exports=function(t,r){var n=function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}(t);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},818:(t,e,r)=>{r.d(e,{A:()=>i});var n=r(963),o=r.n(n),s=r(89),a=r.n(s)()(o());a.push([t.id,".vjs-vtt-thumbnail-holder {\n  position: absolute;\n  transition: opacity 0.2s;\n  bottom: calc(100% + 24px);\n  border-radius: 4px 4px 0 0;\n  pointer-events: none;\n}\n\n.vjs-vtt-thumbnail-timestamp {\n  position: absolute;\n  width: 100%;\n  height: 32px;\n  bottom: -32px;\n  background-color: #1a1a1a;\n  color: #ffffff;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: 700;\n  border-radius: 0 0 4px 4px;\n}","",{version:3,sources:["webpack://./src/plugin.css"],names:[],mappings:"AAAA;EACE,kBAAkB;EAClB,wBAAwB;EACxB,yBAAyB;EACzB,0BAA0B;EAC1B,oBAAoB;AACtB;;AAEA;EACE,kBAAkB;EAClB,WAAW;EACX,YAAY;EACZ,aAAa;EACb,yBAAyB;EACzB,cAAc;EACd,aAAa;EACb,mBAAmB;EACnB,uBAAuB;EACvB,gBAAgB;EAChB,0BAA0B;AAC5B",sourcesContent:[".vjs-vtt-thumbnail-holder {\n  position: absolute;\n  transition: opacity 0.2s;\n  bottom: calc(100% + 24px);\n  border-radius: 4px 4px 0 0;\n  pointer-events: none;\n}\n\n.vjs-vtt-thumbnail-timestamp {\n  position: absolute;\n  width: 100%;\n  height: 32px;\n  bottom: -32px;\n  background-color: #1a1a1a;\n  color: #ffffff;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: 700;\n  border-radius: 0 0 4px 4px;\n}"],sourceRoot:""}]);const i=a},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(r){!function(t,e,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var o=void 0!==r.layer;o&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,o&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var s=r.sourceMap;s&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleTagTransform(n,t,e.options)}(e,t,r)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},963:t=>{t.exports=function(t){var e=t[1],r=t[3];if(!r)return e;if("function"==typeof btoa){var n=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),s="/*# ".concat(o," */");return[e].concat([s]).join("\n")}return[e].join("\n")}}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var s=e[n]={id:n,exports:{}};return t[n](s,s.exports,r),s.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.nc=void 0;const n=videojs;var o=r.n(n),s=r(72),a=r.n(s),i=r(825),c=r.n(i),l=r(659),u=r.n(l),p=r(56),d=r.n(p),h=r(540),m=r.n(h),f=r(113),v=r.n(f),g=r(818),A={};A.styleTagTransform=v(),A.setAttributes=d(),A.insert=u().bind(null,"head"),A.domAPI=c(),A.insertStyleElement=m(),a()(g.A,A),g.A&&g.A.locals&&g.A.locals;const b=o().getPlugin("plugin");class B extends b{constructor(t,e){super(t,e),e.vttSrc?(this.vttSrc=e.vttSrc,this.getVttData(),this.createThumbnailPreview()):console.error("No source file exists!")}getVttData(){fetch(this.vttSrc).then(t=>t.text()).then(t=>{this.vttData=this.processVttPayload(t)}).catch(t=>{console.error("Error fetching VTT file:",t)})}processVttPayload(t){const e=[],r=t.split("\n");let n=0;for(;n<r.length;){const t=r[n].trim();if(t&&!t.startsWith("WEBVTT")){const o=t.match(/(\d{2}:\d{2}:\d{2}\.\d{3}) --> (\d{2}:\d{2}:\d{2}\.\d{3})/);if(o){const t=this.getSecondsFromTimestamp(o[1]),s=this.getSecondsFromTimestamp(o[2]);n++;const a=r[n].trim(),i=a.match(/#xywh=(\d+),(\d+),(\d+),(\d+)/);if(i){const[,r,n,o,c]=i,l={backgroundImage:`url(${a.split("#")[0]})`,backgroundPosition:`-${r}px -${n}px`,width:`${o}px`,height:`${c}px`};e.push({start:t,end:s,css:l})}}else console.error("malformated time code: ",t)}n++}return e}createThumbnailPreview(){this.thumbHolder=document.createElement("div"),this.thumbHolder.setAttribute("class","vjs-vtt-thumbnail-holder"),this.timestampLabel=document.createElement("div"),this.timestampLabel.setAttribute("class","vjs-vtt-thumbnail-timestamp"),this.thumbHolder.appendChild(this.timestampLabel),this.progressBar=this.player.controlBar.progressControl.el(),this.progressBar.appendChild(this.thumbHolder),this.player.controlBar.progressControl.seekBar.mouseTimeDisplay.addClass("vjs-hidden"),this.progressBar.addEventListener("mouseenter",this.onProgressBarMouseEnter),this.progressBar.addEventListener("mouseleave",this.onProgressBarMouseLeave)}onProgressBarMouseEnter=()=>{this.progressBar.addEventListener("mousemove",this.onProgressBarMouseMove),this.showThumbnailHolder()};onProgressBarMouseLeave=()=>{this.progressBar.removeEventListener("mousemove",this.onProgressBarMouseMove),this.hideThumbnailHolder()};onProgressBarMouseMove=t=>{const e=this.player.duration(),r=o().dom.getPointerPosition(this.progressBar,t).x,n=o().time.formatTime(r*e,e);this.timestampLabel.innerHTML=n.toString();const s=r*e,a=this.getStyleForTime(s);for(const t in a)a.hasOwnProperty(t)&&(this.thumbHolder.style[t]=a[t]);const i=this.thumbHolder.getBoundingClientRect().width/2,c=this.progressBar.offsetWidth,l=r*c;this.thumbHolder.style.transform=l<i?"translateX(0)":c-l<i?`translateX(${c-2*i}px)`:`translateX(${l-i}px)`};getStyleForTime(t){if(!this.vttData)return{};for(let e=0;e<this.vttData.length;e++){const r=this.vttData[e];if(t>=r.start&&t<=r.end)return r.css}return{}}getSecondsFromTimestamp(t){const e=t.split(":"),r=parseInt(e[0],10),n=parseInt(e[1],10),o=e[2].split(".");return 3600*r+60*n+parseInt(o[0],10)+parseInt(o[1],10)/1e3}showThumbnailHolder(){this.thumbHolder.style.display="block"}hideThumbnailHolder(){this.thumbHolder.style.display="none"}dispose(){this.progressBar.removeEventListener("mouseenter",this.onProgressBarMouseEnter),this.progressBar.removeEventListener("mouseleave",this.onProgressBarMouseLeave),super.dispose()}}o().registerPlugin("vttPreviewThumbnail",B),B.VERSION="1.0.1"})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxTQUFTRixFQUFNLEdBQUksSUFDM0JHLEVBQVVELFNBQVNGLEVBQU0sR0FBSSxJQUM3QkksRUFBZUosRUFBTSxHQUFHbkQsTUFBTSxLQUdwQyxPQUFlLEtBQVJvRCxFQUF5QixHQUFWRSxFQUZORCxTQUFTRSxFQUFhLEdBQUksSUFDckJGLFNBQVNFLEVBQWEsR0FBSSxJQUFNLEdBRXZELENBRUF6QixtQkFBQUEsR0FDRTNILEtBQUs4RyxZQUFZdEYsTUFBTTZILFFBQVUsT0FDbkMsQ0FFQXhCLG1CQUFBQSxHQUNFN0gsS0FBSzhHLFlBQVl0RixNQUFNNkgsUUFBVSxNQUNuQyxDQUVBQyxPQUFBQSxHQUNFdEosS0FBS2dILFlBQVlZLG9CQUFvQixhQUFjNUgsS0FBS3dILHlCQUN4RHhILEtBQUtnSCxZQUFZWSxvQkFBb0IsYUFBYzVILEtBQUt5SCx5QkFDeEQzQyxNQUFNd0UsU0FDUixFQUdGOUUsSUFBQUEsZUFBdUIsc0JBQXVCRyxHQUM5Q0EsRUFBb0I0RSxRIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdmlkZW9qcy12dHQtcHJldmlldy10aHVtYm5haWwvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanMiLCJ3ZWJwYWNrOi8vdmlkZW9qcy12dHQtcHJldmlldy10aHVtYm5haWwvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanMiLCJ3ZWJwYWNrOi8vdmlkZW9qcy12dHQtcHJldmlldy10aHVtYm5haWwvLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzIiwid2VicGFjazovL3ZpZGVvanMtdnR0LXByZXZpZXctdGh1bWJuYWlsLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVUYWdUcmFuc2Zvcm0uanMiLCJ3ZWJwYWNrOi8vdmlkZW9qcy12dHQtcHJldmlldy10aHVtYm5haWwvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vdmlkZW9qcy12dHQtcHJldmlldy10aHVtYm5haWwvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRCeVNlbGVjdG9yLmpzIiwid2VicGFjazovL3ZpZGVvanMtdnR0LXByZXZpZXctdGh1bWJuYWlsLy4vc3JjL3BsdWdpbi5jc3MiLCJ3ZWJwYWNrOi8vdmlkZW9qcy12dHQtcHJldmlldy10aHVtYm5haWwvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZURvbUFQSS5qcyIsIndlYnBhY2s6Ly92aWRlb2pzLXZ0dC1wcmV2aWV3LXRodW1ibmFpbC8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9zb3VyY2VNYXBzLmpzIiwid2VicGFjazovL3ZpZGVvanMtdnR0LXByZXZpZXctdGh1bWJuYWlsL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3ZpZGVvanMtdnR0LXByZXZpZXctdGh1bWJuYWlsL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL3ZpZGVvanMtdnR0LXByZXZpZXctdGh1bWJuYWlsL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly92aWRlb2pzLXZ0dC1wcmV2aWV3LXRodW1ibmFpbC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3ZpZGVvanMtdnR0LXByZXZpZXctdGh1bWJuYWlsL3dlYnBhY2svcnVudGltZS9ub25jZSIsIndlYnBhY2s6Ly92aWRlb2pzLXZ0dC1wcmV2aWV3LXRodW1ibmFpbC9leHRlcm5hbCB2YXIgXCJ2aWRlb2pzXCIiLCJ3ZWJwYWNrOi8vdmlkZW9qcy12dHQtcHJldmlldy10aHVtYm5haWwvLi9zcmMvcGx1Z2luLmNzcz9kNGQxIiwid2VicGFjazovL3ZpZGVvanMtdnR0LXByZXZpZXctdGh1bWJuYWlsLy4vc3JjL3BsdWdpbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBzZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMoc3R5bGVFbGVtZW50KSB7XG4gIHZhciBub25jZSA9IHR5cGVvZiBfX3dlYnBhY2tfbm9uY2VfXyAhPT0gXCJ1bmRlZmluZWRcIiA/IF9fd2VicGFja19ub25jZV9fIDogbnVsbDtcbiAgaWYgKG5vbmNlKSB7XG4gICAgc3R5bGVFbGVtZW50LnNldEF0dHJpYnV0ZShcIm5vbmNlXCIsIG5vbmNlKTtcbiAgfVxufVxubW9kdWxlLmV4cG9ydHMgPSBzZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXM7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBzdHlsZXNJbkRPTSA9IFtdO1xuZnVuY3Rpb24gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcikge1xuICB2YXIgcmVzdWx0ID0gLTE7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzSW5ET00ubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoc3R5bGVzSW5ET01baV0uaWRlbnRpZmllciA9PT0gaWRlbnRpZmllcikge1xuICAgICAgcmVzdWx0ID0gaTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpIHtcbiAgdmFyIGlkQ291bnRNYXAgPSB7fTtcbiAgdmFyIGlkZW50aWZpZXJzID0gW107XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gbGlzdFtpXTtcbiAgICB2YXIgaWQgPSBvcHRpb25zLmJhc2UgPyBpdGVtWzBdICsgb3B0aW9ucy5iYXNlIDogaXRlbVswXTtcbiAgICB2YXIgY291bnQgPSBpZENvdW50TWFwW2lkXSB8fCAwO1xuICAgIHZhciBpZGVudGlmaWVyID0gXCJcIi5jb25jYXQoaWQsIFwiIFwiKS5jb25jYXQoY291bnQpO1xuICAgIGlkQ291bnRNYXBbaWRdID0gY291bnQgKyAxO1xuICAgIHZhciBpbmRleEJ5SWRlbnRpZmllciA9IGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgIHZhciBvYmogPSB7XG4gICAgICBjc3M6IGl0ZW1bMV0sXG4gICAgICBtZWRpYTogaXRlbVsyXSxcbiAgICAgIHNvdXJjZU1hcDogaXRlbVszXSxcbiAgICAgIHN1cHBvcnRzOiBpdGVtWzRdLFxuICAgICAgbGF5ZXI6IGl0ZW1bNV1cbiAgICB9O1xuICAgIGlmIChpbmRleEJ5SWRlbnRpZmllciAhPT0gLTEpIHtcbiAgICAgIHN0eWxlc0luRE9NW2luZGV4QnlJZGVudGlmaWVyXS5yZWZlcmVuY2VzKys7XG4gICAgICBzdHlsZXNJbkRPTVtpbmRleEJ5SWRlbnRpZmllcl0udXBkYXRlcihvYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgdXBkYXRlciA9IGFkZEVsZW1lbnRTdHlsZShvYmosIG9wdGlvbnMpO1xuICAgICAgb3B0aW9ucy5ieUluZGV4ID0gaTtcbiAgICAgIHN0eWxlc0luRE9NLnNwbGljZShpLCAwLCB7XG4gICAgICAgIGlkZW50aWZpZXI6IGlkZW50aWZpZXIsXG4gICAgICAgIHVwZGF0ZXI6IHVwZGF0ZXIsXG4gICAgICAgIHJlZmVyZW5jZXM6IDFcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZGVudGlmaWVycy5wdXNoKGlkZW50aWZpZXIpO1xuICB9XG4gIHJldHVybiBpZGVudGlmaWVycztcbn1cbmZ1bmN0aW9uIGFkZEVsZW1lbnRTdHlsZShvYmosIG9wdGlvbnMpIHtcbiAgdmFyIGFwaSA9IG9wdGlvbnMuZG9tQVBJKG9wdGlvbnMpO1xuICBhcGkudXBkYXRlKG9iaik7XG4gIHZhciB1cGRhdGVyID0gZnVuY3Rpb24gdXBkYXRlcihuZXdPYmopIHtcbiAgICBpZiAobmV3T2JqKSB7XG4gICAgICBpZiAobmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJiBuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJiBuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwICYmIG5ld09iai5zdXBwb3J0cyA9PT0gb2JqLnN1cHBvcnRzICYmIG5ld09iai5sYXllciA9PT0gb2JqLmxheWVyKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGFwaS51cGRhdGUob2JqID0gbmV3T2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXBpLnJlbW92ZSgpO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIHVwZGF0ZXI7XG59XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChsaXN0LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICBsaXN0ID0gbGlzdCB8fCBbXTtcbiAgdmFyIGxhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShsaXN0LCBvcHRpb25zKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZShuZXdMaXN0KSB7XG4gICAgbmV3TGlzdCA9IG5ld0xpc3QgfHwgW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpZGVudGlmaWVyID0gbGFzdElkZW50aWZpZXJzW2ldO1xuICAgICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgICBzdHlsZXNJbkRPTVtpbmRleF0ucmVmZXJlbmNlcy0tO1xuICAgIH1cbiAgICB2YXIgbmV3TGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKG5ld0xpc3QsIG9wdGlvbnMpO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgX2lkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbX2ldO1xuICAgICAgdmFyIF9pbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKF9pZGVudGlmaWVyKTtcbiAgICAgIGlmIChzdHlsZXNJbkRPTVtfaW5kZXhdLnJlZmVyZW5jZXMgPT09IDApIHtcbiAgICAgICAgc3R5bGVzSW5ET01bX2luZGV4XS51cGRhdGVyKCk7XG4gICAgICAgIHN0eWxlc0luRE9NLnNwbGljZShfaW5kZXgsIDEpO1xuICAgICAgfVxuICAgIH1cbiAgICBsYXN0SWRlbnRpZmllcnMgPSBuZXdMYXN0SWRlbnRpZmllcnM7XG4gIH07XG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG4vKlxuICBNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuICBBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY3NzV2l0aE1hcHBpbmdUb1N0cmluZykge1xuICB2YXIgbGlzdCA9IFtdO1xuXG4gIC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcbiAgbGlzdC50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgdmFyIGNvbnRlbnQgPSBcIlwiO1xuICAgICAgdmFyIG5lZWRMYXllciA9IHR5cGVvZiBpdGVtWzVdICE9PSBcInVuZGVmaW5lZFwiO1xuICAgICAgaWYgKGl0ZW1bNF0pIHtcbiAgICAgICAgY29udGVudCArPSBcIkBzdXBwb3J0cyAoXCIuY29uY2F0KGl0ZW1bNF0sIFwiKSB7XCIpO1xuICAgICAgfVxuICAgICAgaWYgKGl0ZW1bMl0pIHtcbiAgICAgICAgY29udGVudCArPSBcIkBtZWRpYSBcIi5jb25jYXQoaXRlbVsyXSwgXCIge1wiKTtcbiAgICAgIH1cbiAgICAgIGlmIChuZWVkTGF5ZXIpIHtcbiAgICAgICAgY29udGVudCArPSBcIkBsYXllclwiLmNvbmNhdChpdGVtWzVdLmxlbmd0aCA+IDAgPyBcIiBcIi5jb25jYXQoaXRlbVs1XSkgOiBcIlwiLCBcIiB7XCIpO1xuICAgICAgfVxuICAgICAgY29udGVudCArPSBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0pO1xuICAgICAgaWYgKG5lZWRMYXllcikge1xuICAgICAgICBjb250ZW50ICs9IFwifVwiO1xuICAgICAgfVxuICAgICAgaWYgKGl0ZW1bMl0pIHtcbiAgICAgICAgY29udGVudCArPSBcIn1cIjtcbiAgICAgIH1cbiAgICAgIGlmIChpdGVtWzRdKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJ9XCI7XG4gICAgICB9XG4gICAgICByZXR1cm4gY29udGVudDtcbiAgICB9KS5qb2luKFwiXCIpO1xuICB9O1xuXG4gIC8vIGltcG9ydCBhIGxpc3Qgb2YgbW9kdWxlcyBpbnRvIHRoZSBsaXN0XG4gIGxpc3QuaSA9IGZ1bmN0aW9uIGkobW9kdWxlcywgbWVkaWEsIGRlZHVwZSwgc3VwcG9ydHMsIGxheWVyKSB7XG4gICAgaWYgKHR5cGVvZiBtb2R1bGVzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCB1bmRlZmluZWRdXTtcbiAgICB9XG4gICAgdmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcbiAgICBpZiAoZGVkdXBlKSB7XG4gICAgICBmb3IgKHZhciBrID0gMDsgayA8IHRoaXMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgdmFyIGlkID0gdGhpc1trXVswXTtcbiAgICAgICAgaWYgKGlkICE9IG51bGwpIHtcbiAgICAgICAgICBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2lkXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZm9yICh2YXIgX2sgPSAwOyBfayA8IG1vZHVsZXMubGVuZ3RoOyBfaysrKSB7XG4gICAgICB2YXIgaXRlbSA9IFtdLmNvbmNhdChtb2R1bGVzW19rXSk7XG4gICAgICBpZiAoZGVkdXBlICYmIGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaXRlbVswXV0pIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGxheWVyICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgaXRlbVs1XSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIGl0ZW1bNV0gPSBsYXllcjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtWzFdID0gXCJAbGF5ZXJcIi5jb25jYXQoaXRlbVs1XS5sZW5ndGggPiAwID8gXCIgXCIuY29uY2F0KGl0ZW1bNV0pIDogXCJcIiwgXCIge1wiKS5jb25jYXQoaXRlbVsxXSwgXCJ9XCIpO1xuICAgICAgICAgIGl0ZW1bNV0gPSBsYXllcjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKG1lZGlhKSB7XG4gICAgICAgIGlmICghaXRlbVsyXSkge1xuICAgICAgICAgIGl0ZW1bMl0gPSBtZWRpYTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtWzFdID0gXCJAbWVkaWEgXCIuY29uY2F0KGl0ZW1bMl0sIFwiIHtcIikuY29uY2F0KGl0ZW1bMV0sIFwifVwiKTtcbiAgICAgICAgICBpdGVtWzJdID0gbWVkaWE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChzdXBwb3J0cykge1xuICAgICAgICBpZiAoIWl0ZW1bNF0pIHtcbiAgICAgICAgICBpdGVtWzRdID0gXCJcIi5jb25jYXQoc3VwcG9ydHMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1bMV0gPSBcIkBzdXBwb3J0cyAoXCIuY29uY2F0KGl0ZW1bNF0sIFwiKSB7XCIpLmNvbmNhdChpdGVtWzFdLCBcIn1cIik7XG4gICAgICAgICAgaXRlbVs0XSA9IHN1cHBvcnRzO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsaXN0LnB1c2goaXRlbSk7XG4gICAgfVxuICB9O1xuICByZXR1cm4gbGlzdDtcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gc3R5bGVUYWdUcmFuc2Zvcm0oY3NzLCBzdHlsZUVsZW1lbnQpIHtcbiAgaWYgKHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcbiAgfSBlbHNlIHtcbiAgICB3aGlsZSAoc3R5bGVFbGVtZW50LmZpcnN0Q2hpbGQpIHtcbiAgICAgIHN0eWxlRWxlbWVudC5yZW1vdmVDaGlsZChzdHlsZUVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gICAgfVxuICAgIHN0eWxlRWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcbiAgfVxufVxubW9kdWxlLmV4cG9ydHMgPSBzdHlsZVRhZ1RyYW5zZm9ybTsiLCJcInVzZSBzdHJpY3RcIjtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykge1xuICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgb3B0aW9ucy5zZXRBdHRyaWJ1dGVzKGVsZW1lbnQsIG9wdGlvbnMuYXR0cmlidXRlcyk7XG4gIG9wdGlvbnMuaW5zZXJ0KGVsZW1lbnQsIG9wdGlvbnMub3B0aW9ucyk7XG4gIHJldHVybiBlbGVtZW50O1xufVxubW9kdWxlLmV4cG9ydHMgPSBpbnNlcnRTdHlsZUVsZW1lbnQ7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBtZW1vID0ge307XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gZ2V0VGFyZ2V0KHRhcmdldCkge1xuICBpZiAodHlwZW9mIG1lbW9bdGFyZ2V0XSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHZhciBzdHlsZVRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KTtcblxuICAgIC8vIFNwZWNpYWwgY2FzZSB0byByZXR1cm4gaGVhZCBvZiBpZnJhbWUgaW5zdGVhZCBvZiBpZnJhbWUgaXRzZWxmXG4gICAgaWYgKHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCAmJiBzdHlsZVRhcmdldCBpbnN0YW5jZW9mIHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gVGhpcyB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhY2Nlc3MgdG8gaWZyYW1lIGlzIGJsb2NrZWRcbiAgICAgICAgLy8gZHVlIHRvIGNyb3NzLW9yaWdpbiByZXN0cmljdGlvbnNcbiAgICAgICAgc3R5bGVUYXJnZXQgPSBzdHlsZVRhcmdldC5jb250ZW50RG9jdW1lbnQuaGVhZDtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gaXN0YW5idWwgaWdub3JlIG5leHRcbiAgICAgICAgc3R5bGVUYXJnZXQgPSBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgICBtZW1vW3RhcmdldF0gPSBzdHlsZVRhcmdldDtcbiAgfVxuICByZXR1cm4gbWVtb1t0YXJnZXRdO1xufVxuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIGluc2VydEJ5U2VsZWN0b3IoaW5zZXJ0LCBzdHlsZSkge1xuICB2YXIgdGFyZ2V0ID0gZ2V0VGFyZ2V0KGluc2VydCk7XG4gIGlmICghdGFyZ2V0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGRuJ3QgZmluZCBhIHN0eWxlIHRhcmdldC4gVGhpcyBwcm9iYWJseSBtZWFucyB0aGF0IHRoZSB2YWx1ZSBmb3IgdGhlICdpbnNlcnQnIHBhcmFtZXRlciBpcyBpbnZhbGlkLlwiKTtcbiAgfVxuICB0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xufVxubW9kdWxlLmV4cG9ydHMgPSBpbnNlcnRCeVNlbGVjdG9yOyIsIi8vIEltcG9ydHNcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fIGZyb20gXCIuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvc291cmNlTWFwcy5qc1wiO1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyBmcm9tIFwiLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiO1xudmFyIF9fX0NTU19MT0FERVJfRVhQT1JUX19fID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18pO1xuLy8gTW9kdWxlXG5fX19DU1NfTE9BREVSX0VYUE9SVF9fXy5wdXNoKFttb2R1bGUuaWQsIGAudmpzLXZ0dC10aHVtYm5haWwtaG9sZGVyIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuMnM7XG4gIGJvdHRvbTogY2FsYygxMDAlICsgMjRweCk7XG4gIGJvcmRlci1yYWRpdXM6IDRweCA0cHggMCAwO1xuICBwb2ludGVyLWV2ZW50czogbm9uZTtcbn1cblxuLnZqcy12dHQtdGh1bWJuYWlsLXRpbWVzdGFtcCB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMzJweDtcbiAgYm90dG9tOiAtMzJweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzFhMWExYTtcbiAgY29sb3I6ICNmZmZmZmY7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBmb250LXdlaWdodDogNzAwO1xuICBib3JkZXItcmFkaXVzOiAwIDAgNHB4IDRweDtcbn1gLCBcIlwiLHtcInZlcnNpb25cIjozLFwic291cmNlc1wiOltcIndlYnBhY2s6Ly8uL3NyYy9wbHVnaW4uY3NzXCJdLFwibmFtZXNcIjpbXSxcIm1hcHBpbmdzXCI6XCJBQUFBO0VBQ0Usa0JBQWtCO0VBQ2xCLHdCQUF3QjtFQUN4Qix5QkFBeUI7RUFDekIsMEJBQTBCO0VBQzFCLG9CQUFvQjtBQUN0Qjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixXQUFXO0VBQ1gsWUFBWTtFQUNaLGFBQWE7RUFDYix5QkFBeUI7RUFDekIsY0FBYztFQUNkLGFBQWE7RUFDYixtQkFBbUI7RUFDbkIsdUJBQXVCO0VBQ3ZCLGdCQUFnQjtFQUNoQiwwQkFBMEI7QUFDNUJcIixcInNvdXJjZXNDb250ZW50XCI6W1wiLnZqcy12dHQtdGh1bWJuYWlsLWhvbGRlciB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuMnM7XFxuICBib3R0b206IGNhbGMoMTAwJSArIDI0cHgpO1xcbiAgYm9yZGVyLXJhZGl1czogNHB4IDRweCAwIDA7XFxuICBwb2ludGVyLWV2ZW50czogbm9uZTtcXG59XFxuXFxuLnZqcy12dHQtdGh1bWJuYWlsLXRpbWVzdGFtcCB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICB3aWR0aDogMTAwJTtcXG4gIGhlaWdodDogMzJweDtcXG4gIGJvdHRvbTogLTMycHg7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMWExYTFhO1xcbiAgY29sb3I6ICNmZmZmZmY7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xcbiAgZm9udC13ZWlnaHQ6IDcwMDtcXG4gIGJvcmRlci1yYWRpdXM6IDAgMCA0cHggNHB4O1xcbn1cIl0sXCJzb3VyY2VSb290XCI6XCJcIn1dKTtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IF9fX0NTU19MT0FERVJfRVhQT1JUX19fO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gYXBwbHkoc3R5bGVFbGVtZW50LCBvcHRpb25zLCBvYmopIHtcbiAgdmFyIGNzcyA9IFwiXCI7XG4gIGlmIChvYmouc3VwcG9ydHMpIHtcbiAgICBjc3MgKz0gXCJAc3VwcG9ydHMgKFwiLmNvbmNhdChvYmouc3VwcG9ydHMsIFwiKSB7XCIpO1xuICB9XG4gIGlmIChvYmoubWVkaWEpIHtcbiAgICBjc3MgKz0gXCJAbWVkaWEgXCIuY29uY2F0KG9iai5tZWRpYSwgXCIge1wiKTtcbiAgfVxuICB2YXIgbmVlZExheWVyID0gdHlwZW9mIG9iai5sYXllciAhPT0gXCJ1bmRlZmluZWRcIjtcbiAgaWYgKG5lZWRMYXllcikge1xuICAgIGNzcyArPSBcIkBsYXllclwiLmNvbmNhdChvYmoubGF5ZXIubGVuZ3RoID4gMCA/IFwiIFwiLmNvbmNhdChvYmoubGF5ZXIpIDogXCJcIiwgXCIge1wiKTtcbiAgfVxuICBjc3MgKz0gb2JqLmNzcztcbiAgaWYgKG5lZWRMYXllcikge1xuICAgIGNzcyArPSBcIn1cIjtcbiAgfVxuICBpZiAob2JqLm1lZGlhKSB7XG4gICAgY3NzICs9IFwifVwiO1xuICB9XG4gIGlmIChvYmouc3VwcG9ydHMpIHtcbiAgICBjc3MgKz0gXCJ9XCI7XG4gIH1cbiAgdmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XG4gIGlmIChzb3VyY2VNYXAgJiYgdHlwZW9mIGJ0b2EgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiLmNvbmNhdChidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpLCBcIiAqL1wiKTtcbiAgfVxuXG4gIC8vIEZvciBvbGQgSUVcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICAqL1xuICBvcHRpb25zLnN0eWxlVGFnVHJhbnNmb3JtKGNzcywgc3R5bGVFbGVtZW50LCBvcHRpb25zLm9wdGlvbnMpO1xufVxuZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCkge1xuICAvLyBpc3RhbmJ1bCBpZ25vcmUgaWZcbiAgaWYgKHN0eWxlRWxlbWVudC5wYXJlbnROb2RlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHN0eWxlRWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlRWxlbWVudCk7XG59XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gZG9tQVBJKG9wdGlvbnMpIHtcbiAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHJldHVybiB7XG4gICAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSgpIHt9LFxuICAgICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7fVxuICAgIH07XG4gIH1cbiAgdmFyIHN0eWxlRWxlbWVudCA9IG9wdGlvbnMuaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuICByZXR1cm4ge1xuICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKG9iaikge1xuICAgICAgYXBwbHkoc3R5bGVFbGVtZW50LCBvcHRpb25zLCBvYmopO1xuICAgIH0sXG4gICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgICByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGVFbGVtZW50KTtcbiAgICB9XG4gIH07XG59XG5tb2R1bGUuZXhwb3J0cyA9IGRvbUFQSTsiLCJcInVzZSBzdHJpY3RcIjtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXRlbSkge1xuICB2YXIgY29udGVudCA9IGl0ZW1bMV07XG4gIHZhciBjc3NNYXBwaW5nID0gaXRlbVszXTtcbiAgaWYgKCFjc3NNYXBwaW5nKSB7XG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH1cbiAgaWYgKHR5cGVvZiBidG9hID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICB2YXIgYmFzZTY0ID0gYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoY3NzTWFwcGluZykpKSk7XG4gICAgdmFyIGRhdGEgPSBcInNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LFwiLmNvbmNhdChiYXNlNjQpO1xuICAgIHZhciBzb3VyY2VNYXBwaW5nID0gXCIvKiMgXCIuY29uY2F0KGRhdGEsIFwiICovXCIpO1xuICAgIHJldHVybiBbY29udGVudF0uY29uY2F0KFtzb3VyY2VNYXBwaW5nXSkuam9pbihcIlxcblwiKTtcbiAgfVxuICByZXR1cm4gW2NvbnRlbnRdLmpvaW4oXCJcXG5cIik7XG59OyIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0aWQ6IG1vZHVsZUlkLFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm5jID0gdW5kZWZpbmVkOyIsImNvbnN0IF9fV0VCUEFDS19OQU1FU1BBQ0VfT0JKRUNUX18gPSB2aWRlb2pzOyIsIlxuICAgICAgaW1wb3J0IEFQSSBmcm9tIFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiO1xuICAgICAgaW1wb3J0IGRvbUFQSSBmcm9tIFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlRG9tQVBJLmpzXCI7XG4gICAgICBpbXBvcnQgaW5zZXJ0Rm4gZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRCeVNlbGVjdG9yLmpzXCI7XG4gICAgICBpbXBvcnQgc2V0QXR0cmlidXRlcyBmcm9tIFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3NldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlcy5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydFN0eWxlRWxlbWVudCBmcm9tIFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydFN0eWxlRWxlbWVudC5qc1wiO1xuICAgICAgaW1wb3J0IHN0eWxlVGFnVHJhbnNmb3JtRm4gZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZVRhZ1RyYW5zZm9ybS5qc1wiO1xuICAgICAgaW1wb3J0IGNvbnRlbnQsICogYXMgbmFtZWRFeHBvcnQgZnJvbSBcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9wbHVnaW4uY3NzXCI7XG4gICAgICBcbiAgICAgIFxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLnN0eWxlVGFnVHJhbnNmb3JtID0gc3R5bGVUYWdUcmFuc2Zvcm1Gbjtcbm9wdGlvbnMuc2V0QXR0cmlidXRlcyA9IHNldEF0dHJpYnV0ZXM7XG5vcHRpb25zLmluc2VydCA9IGluc2VydEZuLmJpbmQobnVsbCwgXCJoZWFkXCIpO1xub3B0aW9ucy5kb21BUEkgPSBkb21BUEk7XG5vcHRpb25zLmluc2VydFN0eWxlRWxlbWVudCA9IGluc2VydFN0eWxlRWxlbWVudDtcblxudmFyIHVwZGF0ZSA9IEFQSShjb250ZW50LCBvcHRpb25zKTtcblxuXG5cbmV4cG9ydCAqIGZyb20gXCIhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vcGx1Z2luLmNzc1wiO1xuICAgICAgIGV4cG9ydCBkZWZhdWx0IGNvbnRlbnQgJiYgY29udGVudC5sb2NhbHMgPyBjb250ZW50LmxvY2FscyA6IHVuZGVmaW5lZDtcbiIsImltcG9ydCB2aWRlb2pzIGZyb20gJ3ZpZGVvLmpzJ1xuaW1wb3J0IHBhY2thZ2VJbmZvIGZyb20gJy4uL3BhY2thZ2UuanNvbidcbmltcG9ydCAnLi9wbHVnaW4uY3NzJ1xuXG5jb25zdCBQbHVnaW4gPSB2aWRlb2pzLmdldFBsdWdpbigncGx1Z2luJylcblxuY2xhc3MgVnR0UHJldmlld1RodW1ibmFpbCBleHRlbmRzIFBsdWdpbiB7XG4gIGNvbnN0cnVjdG9yKHBsYXllciwgb3B0aW9ucykge1xuICAgIHN1cGVyKHBsYXllciwgb3B0aW9ucyk7XG5cbiAgICBpZiAob3B0aW9ucy52dHRTcmMpIHtcbiAgICAgIHRoaXMudnR0U3JjID0gb3B0aW9ucy52dHRTcmNcbiAgICAgIHRoaXMuZ2V0VnR0RGF0YSgpXG4gICAgICB0aGlzLmNyZWF0ZVRodW1ibmFpbFByZXZpZXcoKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdObyBzb3VyY2UgZmlsZSBleGlzdHMhJylcbiAgICB9XG5cbiAgfVxuXG4gIGdldFZ0dERhdGEoKSB7XG4gICAgZmV0Y2godGhpcy52dHRTcmMpXG4gICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS50ZXh0KCkpXG4gICAgICAudGhlbihkYXRhID0+IHtcbiAgICAgICAgdGhpcy52dHREYXRhID0gdGhpcy5wcm9jZXNzVnR0UGF5bG9hZChkYXRhKVxuICAgICAgfSlcbiAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIFZUVCBmaWxlOicsIGVycm9yKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgcHJvY2Vzc1Z0dFBheWxvYWQoZGF0YSkge1xuICAgIGNvbnN0IGN1ZXMgPSBbXVxuICAgIGNvbnN0IGxpbmVzID0gZGF0YS5zcGxpdCgnXFxuJylcbiAgICBsZXQgaSA9IDBcblxuICAgIHdoaWxlIChpIDwgbGluZXMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBsaW5lID0gbGluZXNbaV0udHJpbSgpXG5cbiAgICAgIGlmIChsaW5lICYmICFsaW5lLnN0YXJ0c1dpdGgoJ1dFQlZUVCcpKSB7XG4gICAgICAgIGNvbnN0IHRpbWVNYXRjaCA9IGxpbmUubWF0Y2goLyhcXGR7Mn06XFxkezJ9OlxcZHsyfVxcLlxcZHszfSkgLS0+IChcXGR7Mn06XFxkezJ9OlxcZHsyfVxcLlxcZHszfSkvKVxuICAgICAgICBpZiAodGltZU1hdGNoKSB7XG4gICAgICAgICAgY29uc3Qgc3RhcnQgPSB0aGlzLmdldFNlY29uZHNGcm9tVGltZXN0YW1wKHRpbWVNYXRjaFsxXSlcbiAgICAgICAgICBjb25zdCBlbmQgPSB0aGlzLmdldFNlY29uZHNGcm9tVGltZXN0YW1wKHRpbWVNYXRjaFsyXSlcbiAgICAgICAgICBpKytcbiAgICAgICAgICBjb25zdCBpbWFnZVVybCA9IGxpbmVzW2ldLnRyaW0oKVxuICAgICAgICAgIGNvbnN0IG1hdGNoWFlXSCA9IGltYWdlVXJsLm1hdGNoKC8jeHl3aD0oXFxkKyksKFxcZCspLChcXGQrKSwoXFxkKykvKTtcbiAgICAgICAgICBpZiAobWF0Y2hYWVdIKSB7XG4gICAgICAgICAgICBjb25zdCBbLCB4LCB5LCB3aWR0aCwgaGVpZ2h0XSA9IG1hdGNoWFlXSFxuICAgICAgICAgICAgY29uc3QgY3NzID0ge1xuICAgICAgICAgICAgICBiYWNrZ3JvdW5kSW1hZ2U6IGB1cmwoJHtpbWFnZVVybC5zcGxpdCgnIycpWzBdfSlgLFxuICAgICAgICAgICAgICBiYWNrZ3JvdW5kUG9zaXRpb246YC0ke3h9cHggLSR7eX1weGAsXG4gICAgICAgICAgICAgIHdpZHRoOiBgJHt3aWR0aH1weGAsXG4gICAgICAgICAgICAgIGhlaWdodDogYCR7aGVpZ2h0fXB4YFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3Vlcy5wdXNoKHsgc3RhcnQsIGVuZCwgY3NzIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ21hbGZvcm1hdGVkIHRpbWUgY29kZTogJywgbGluZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaSsrXG4gICAgfVxuICAgIHJldHVybiBjdWVzXG4gIH1cblxuICBjcmVhdGVUaHVtYm5haWxQcmV2aWV3KCkge1xuICAgIHRoaXMudGh1bWJIb2xkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIHRoaXMudGh1bWJIb2xkZXIuc2V0QXR0cmlidXRlKCdjbGFzcycsICd2anMtdnR0LXRodW1ibmFpbC1ob2xkZXInKVxuICAgIHRoaXMudGltZXN0YW1wTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIHRoaXMudGltZXN0YW1wTGFiZWwuc2V0QXR0cmlidXRlKCdjbGFzcycsICd2anMtdnR0LXRodW1ibmFpbC10aW1lc3RhbXAnKVxuICAgIHRoaXMudGh1bWJIb2xkZXIuYXBwZW5kQ2hpbGQodGhpcy50aW1lc3RhbXBMYWJlbClcbiAgICB0aGlzLnByb2dyZXNzQmFyID0gdGhpcy5wbGF5ZXIuY29udHJvbEJhci5wcm9ncmVzc0NvbnRyb2wuZWwoKVxuICAgIHRoaXMucHJvZ3Jlc3NCYXIuYXBwZW5kQ2hpbGQodGhpcy50aHVtYkhvbGRlcilcbiAgICAvLyBoaWRlIGRlZmF1bHQgdGltZSB0b29sdGlwXG4gICAgdGhpcy5wbGF5ZXIuY29udHJvbEJhci5wcm9ncmVzc0NvbnRyb2wuc2Vla0Jhci5tb3VzZVRpbWVEaXNwbGF5LmFkZENsYXNzKCd2anMtaGlkZGVuJylcblxuICAgIHRoaXMucHJvZ3Jlc3NCYXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIHRoaXMub25Qcm9ncmVzc0Jhck1vdXNlRW50ZXIpXG4gICAgdGhpcy5wcm9ncmVzc0Jhci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgdGhpcy5vblByb2dyZXNzQmFyTW91c2VMZWF2ZSlcbiAgfVxuXG4gIG9uUHJvZ3Jlc3NCYXJNb3VzZUVudGVyID0gKCkgPT4ge1xuICAgIHRoaXMucHJvZ3Jlc3NCYXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5vblByb2dyZXNzQmFyTW91c2VNb3ZlKVxuICAgIHRoaXMuc2hvd1RodW1ibmFpbEhvbGRlcigpXG4gIH1cblxuICBvblByb2dyZXNzQmFyTW91c2VMZWF2ZSA9ICgpID0+IHtcbiAgICB0aGlzLnByb2dyZXNzQmFyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMub25Qcm9ncmVzc0Jhck1vdXNlTW92ZSlcbiAgICB0aGlzLmhpZGVUaHVtYm5haWxIb2xkZXIoKVxuICB9XG5cbiAgb25Qcm9ncmVzc0Jhck1vdXNlTW92ZSA9IChldmVudCkgPT4ge1xuICAgIGNvbnN0IGR1cmF0aW9uID0gdGhpcy5wbGF5ZXIuZHVyYXRpb24oKVxuICAgIGNvbnN0IHBlcmNlbnQgPSB2aWRlb2pzLmRvbS5nZXRQb2ludGVyUG9zaXRpb24odGhpcy5wcm9ncmVzc0JhciwgZXZlbnQpLnhcbiAgICBjb25zdCBmb3JtYXR0ZWRUaW1lID0gdmlkZW9qcy50aW1lLmZvcm1hdFRpbWUocGVyY2VudCAqIGR1cmF0aW9uLCBkdXJhdGlvbilcbiAgICB0aGlzLnRpbWVzdGFtcExhYmVsLmlubmVySFRNTCA9IGZvcm1hdHRlZFRpbWUudG9TdHJpbmcoKVxuXG4gICAgY29uc3QgdGltZSA9IHBlcmNlbnQgKiBkdXJhdGlvblxuICAgIGNvbnN0IGN1cnJlbnRUaHVtYm5haWxTdHlsZSA9IHRoaXMuZ2V0U3R5bGVGb3JUaW1lKHRpbWUpXG5cbiAgICBmb3IgKGNvbnN0IHN0eWxlIGluIGN1cnJlbnRUaHVtYm5haWxTdHlsZSkge1xuICAgICAgaWYgKGN1cnJlbnRUaHVtYm5haWxTdHlsZS5oYXNPd25Qcm9wZXJ0eShzdHlsZSkpIHtcbiAgICAgICAgdGhpcy50aHVtYkhvbGRlci5zdHlsZVtzdHlsZV0gPSBjdXJyZW50VGh1bWJuYWlsU3R5bGVbc3R5bGVdO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFBsYWNlIHRodW1ibmFpbCBhdCBjb3JyZWN0IHBvc2l0aW9uXG4gICAgY29uc3QgaGFsZlRodW1ibmFpbFdpZHRoID0gdGhpcy50aHVtYkhvbGRlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCAvIDJcbiAgICBjb25zdCBwcm9ncmVzc0JhcldpZHRoID0gdGhpcy5wcm9ncmVzc0Jhci5vZmZzZXRXaWR0aFxuICAgIGNvbnN0IHhQb3MgPSBwZXJjZW50ICogcHJvZ3Jlc3NCYXJXaWR0aFxuICAgIGlmICh4UG9zIDwgaGFsZlRodW1ibmFpbFdpZHRoKSB7XG4gICAgICAvLyBtb3VzZSBpcyBuZWFyIHRoZSBzdGFydCBvZiB2aWRlb1xuICAgICAgdGhpcy50aHVtYkhvbGRlci5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgwKWBcbiAgICB9IGVsc2UgaWYgKHByb2dyZXNzQmFyV2lkdGggLSB4UG9zIDwgaGFsZlRodW1ibmFpbFdpZHRoKSB7XG4gICAgICAvLyBtb3VzZSBpcyBuZWFyIHRoZSBlbmQgb2YgdmlkZW9cbiAgICAgIHRoaXMudGh1bWJIb2xkZXIuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoJHtwcm9ncmVzc0JhcldpZHRoIC0gaGFsZlRodW1ibmFpbFdpZHRoKjJ9cHgpYFxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnRodW1iSG9sZGVyLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKCR7eFBvcyAtIGhhbGZUaHVtYm5haWxXaWR0aH1weClgXG4gICAgfVxuICB9XG5cbiAgZ2V0U3R5bGVGb3JUaW1lKHRpbWUpIHtcbiAgICBpZiAoIXRoaXMudnR0RGF0YSkgcmV0dXJuIHt9XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudnR0RGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgY3VlID0gdGhpcy52dHREYXRhW2ldXG4gICAgICBpZiAodGltZSA+PSBjdWUuc3RhcnQgJiYgdGltZSA8PSBjdWUuZW5kKSB7XG4gICAgICAgIHJldHVybiBjdWUuY3NzXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHt9XG4gIH1cblxuXG4gIGdldFNlY29uZHNGcm9tVGltZXN0YW1wKHZ0dFRpbWVzdGFtcCkge1xuICAgIGNvbnN0IHBhcnRzID0gdnR0VGltZXN0YW1wLnNwbGl0KCc6JylcbiAgICBjb25zdCBob3VycyA9IHBhcnNlSW50KHBhcnRzWzBdLCAxMClcbiAgICBjb25zdCBtaW51dGVzID0gcGFyc2VJbnQocGFydHNbMV0sIDEwKVxuICAgIGNvbnN0IHNlY29uZHNQYXJ0cyA9IHBhcnRzWzJdLnNwbGl0KCcuJylcbiAgICBjb25zdCBzZWNvbmRzID0gcGFyc2VJbnQoc2Vjb25kc1BhcnRzWzBdLCAxMClcbiAgICBjb25zdCBtaWxsaXNlY29uZHMgPSBwYXJzZUludChzZWNvbmRzUGFydHNbMV0sIDEwKSAvIDEwMDBcbiAgICByZXR1cm4gaG91cnMgKiAzNjAwICsgbWludXRlcyAqIDYwICsgc2Vjb25kcyArIG1pbGxpc2Vjb25kc1xuICB9XG5cbiAgc2hvd1RodW1ibmFpbEhvbGRlcigpIHtcbiAgICB0aGlzLnRodW1iSG9sZGVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICB9XG5cbiAgaGlkZVRodW1ibmFpbEhvbGRlcigpIHtcbiAgICB0aGlzLnRodW1iSG9sZGVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIH1cblxuICBkaXNwb3NlKCkge1xuICAgIHRoaXMucHJvZ3Jlc3NCYXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIHRoaXMub25Qcm9ncmVzc0Jhck1vdXNlRW50ZXIpXG4gICAgdGhpcy5wcm9ncmVzc0Jhci5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgdGhpcy5vblByb2dyZXNzQmFyTW91c2VMZWF2ZSlcbiAgICBzdXBlci5kaXNwb3NlKCk7XG4gIH1cbn1cblxudmlkZW9qcy5yZWdpc3RlclBsdWdpbigndnR0UHJldmlld1RodW1ibmFpbCcsIFZ0dFByZXZpZXdUaHVtYm5haWwpXG5WdHRQcmV2aWV3VGh1bWJuYWlsLlZFUlNJT04gPSBwYWNrYWdlSW5mby52ZXJzaW9uXG5cbmV4cG9ydCBkZWZhdWx0IFZ0dFByZXZpZXdUaHVtYm5haWwiXSwibmFtZXMiOlsibW9kdWxlIiwiZXhwb3J0cyIsInN0eWxlRWxlbWVudCIsIm5vbmNlIiwic2V0QXR0cmlidXRlIiwic3R5bGVzSW5ET00iLCJnZXRJbmRleEJ5SWRlbnRpZmllciIsImlkZW50aWZpZXIiLCJyZXN1bHQiLCJpIiwibGVuZ3RoIiwibW9kdWxlc1RvRG9tIiwibGlzdCIsIm9wdGlvbnMiLCJpZENvdW50TWFwIiwiaWRlbnRpZmllcnMiLCJpdGVtIiwiaWQiLCJiYXNlIiwiY291bnQiLCJjb25jYXQiLCJpbmRleEJ5SWRlbnRpZmllciIsIm9iaiIsImNzcyIsIm1lZGlhIiwic291cmNlTWFwIiwic3VwcG9ydHMiLCJsYXllciIsInJlZmVyZW5jZXMiLCJ1cGRhdGVyIiwiYWRkRWxlbWVudFN0eWxlIiwiYnlJbmRleCIsInNwbGljZSIsInB1c2giLCJhcGkiLCJkb21BUEkiLCJ1cGRhdGUiLCJuZXdPYmoiLCJyZW1vdmUiLCJsYXN0SWRlbnRpZmllcnMiLCJuZXdMaXN0IiwiaW5kZXgiLCJuZXdMYXN0SWRlbnRpZmllcnMiLCJfaSIsIl9pbmRleCIsImNzc1dpdGhNYXBwaW5nVG9TdHJpbmciLCJ0b1N0cmluZyIsInRoaXMiLCJtYXAiLCJjb250ZW50IiwibmVlZExheWVyIiwiam9pbiIsIm1vZHVsZXMiLCJkZWR1cGUiLCJ1bmRlZmluZWQiLCJhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzIiwiayIsIl9rIiwic3R5bGVTaGVldCIsImNzc1RleHQiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJhcHBlbmRDaGlsZCIsImRvY3VtZW50IiwiY3JlYXRlVGV4dE5vZGUiLCJlbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZXMiLCJhdHRyaWJ1dGVzIiwiaW5zZXJ0IiwibWVtbyIsInN0eWxlIiwidGFyZ2V0Iiwic3R5bGVUYXJnZXQiLCJxdWVyeVNlbGVjdG9yIiwid2luZG93IiwiSFRNTElGcmFtZUVsZW1lbnQiLCJjb250ZW50RG9jdW1lbnQiLCJoZWFkIiwiZSIsImdldFRhcmdldCIsIkVycm9yIiwiX19fQ1NTX0xPQURFUl9FWFBPUlRfX18iLCJpbnNlcnRTdHlsZUVsZW1lbnQiLCJidG9hIiwidW5lc2NhcGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJKU09OIiwic3RyaW5naWZ5Iiwic3R5bGVUYWdUcmFuc2Zvcm0iLCJhcHBseSIsInBhcmVudE5vZGUiLCJyZW1vdmVTdHlsZUVsZW1lbnQiLCJjc3NNYXBwaW5nIiwiYmFzZTY0IiwiZGF0YSIsInNvdXJjZU1hcHBpbmciLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwibiIsImdldHRlciIsIl9fZXNNb2R1bGUiLCJkIiwiYSIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIm5jIiwidmlkZW9qcyIsImxvY2FscyIsIlBsdWdpbiIsIlZ0dFByZXZpZXdUaHVtYm5haWwiLCJjb25zdHJ1Y3RvciIsInBsYXllciIsInN1cGVyIiwidnR0U3JjIiwiZ2V0VnR0RGF0YSIsImNyZWF0ZVRodW1ibmFpbFByZXZpZXciLCJjb25zb2xlIiwiZXJyb3IiLCJmZXRjaCIsInRoZW4iLCJyZXNwb25zZSIsInRleHQiLCJ2dHREYXRhIiwicHJvY2Vzc1Z0dFBheWxvYWQiLCJjYXRjaCIsImN1ZXMiLCJsaW5lcyIsInNwbGl0IiwibGluZSIsInRyaW0iLCJzdGFydHNXaXRoIiwidGltZU1hdGNoIiwibWF0Y2giLCJzdGFydCIsImdldFNlY29uZHNGcm9tVGltZXN0YW1wIiwiZW5kIiwiaW1hZ2VVcmwiLCJtYXRjaFhZV0giLCJ4IiwieSIsIndpZHRoIiwiaGVpZ2h0IiwiYmFja2dyb3VuZEltYWdlIiwiYmFja2dyb3VuZFBvc2l0aW9uIiwidGh1bWJIb2xkZXIiLCJ0aW1lc3RhbXBMYWJlbCIsInByb2dyZXNzQmFyIiwiY29udHJvbEJhciIsInByb2dyZXNzQ29udHJvbCIsImVsIiwic2Vla0JhciIsIm1vdXNlVGltZURpc3BsYXkiLCJhZGRDbGFzcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJvblByb2dyZXNzQmFyTW91c2VFbnRlciIsIm9uUHJvZ3Jlc3NCYXJNb3VzZUxlYXZlIiwib25Qcm9ncmVzc0Jhck1vdXNlTW92ZSIsInNob3dUaHVtYm5haWxIb2xkZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiaGlkZVRodW1ibmFpbEhvbGRlciIsImV2ZW50IiwiZHVyYXRpb24iLCJwZXJjZW50IiwiZ2V0UG9pbnRlclBvc2l0aW9uIiwiZm9ybWF0dGVkVGltZSIsImZvcm1hdFRpbWUiLCJpbm5lckhUTUwiLCJ0aW1lIiwiY3VycmVudFRodW1ibmFpbFN0eWxlIiwiZ2V0U3R5bGVGb3JUaW1lIiwiaGFsZlRodW1ibmFpbFdpZHRoIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwicHJvZ3Jlc3NCYXJXaWR0aCIsIm9mZnNldFdpZHRoIiwieFBvcyIsInRyYW5zZm9ybSIsImN1ZSIsInZ0dFRpbWVzdGFtcCIsInBhcnRzIiwiaG91cnMiLCJwYXJzZUludCIsIm1pbnV0ZXMiLCJzZWNvbmRzUGFydHMiLCJkaXNwbGF5IiwiZGlzcG9zZSIsIlZFUlNJT04iXSwic291cmNlUm9vdCI6IiJ9