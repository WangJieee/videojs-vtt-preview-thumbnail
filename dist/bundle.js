(()=>{"use strict";var t={56:(t,e,r)=>{t.exports=function(t){var e=r.nc;e&&t.setAttribute("nonce",e)}},72:t=>{var e=[];function r(t){for(var r=-1,n=0;n<e.length;n++)if(e[n].identifier===t){r=n;break}return r}function n(t,n){for(var o={},i=[],a=0;a<t.length;a++){var c=t[a],u=n.base?c[0]+n.base:c[0],l=o[u]||0,p="".concat(u," ").concat(l);o[u]=l+1;var d=r(p),h={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==d)e[d].references++,e[d].updater(h);else{var m=s(h,n);n.byIndex=a,e.splice(a,0,{identifier:p,updater:m,references:1})}i.push(p)}return i}function s(t,e){var r=e.domAPI(e);return r.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;r.update(t=e)}else r.remove()}}t.exports=function(t,s){var o=n(t=t||[],s=s||{});return function(t){t=t||[];for(var i=0;i<o.length;i++){var a=r(o[i]);e[a].references--}for(var c=n(t,s),u=0;u<o.length;u++){var l=r(o[u]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}o=c}}},89:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var r="",n=void 0!==e[5];return e[4]&&(r+="@supports (".concat(e[4],") {")),e[2]&&(r+="@media ".concat(e[2]," {")),n&&(r+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),r+=t(e),n&&(r+="}"),e[2]&&(r+="}"),e[4]&&(r+="}"),r}).join("")},e.i=function(t,r,n,s,o){"string"==typeof t&&(t=[[null,t,void 0]]);var i={};if(n)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(i[c]=!0)}for(var u=0;u<t.length;u++){var l=[].concat(t[u]);n&&i[l[0]]||(void 0!==o&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=o),r&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=r):l[2]=r),s&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=s):l[4]="".concat(s)),e.push(l))}},e}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},659:t=>{var e={};t.exports=function(t,r){var n=function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}(t);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},818:(t,e,r)=>{r.d(e,{A:()=>a});var n=r(963),s=r.n(n),o=r(89),i=r.n(o)()(s());i.push([t.id,".vjs-vtt-thumbnail-holder {\n  position: absolute;\n  transition: opacity 0.2s;\n  bottom: calc(100% + 24px);\n  border-radius: 4px 4px 0 0;\n  pointer-events: none;\n}\n\n.vjs-vtt-thumbnail-timestamp {\n  position: absolute;\n  width: 100%;\n  height: 32px;\n  bottom: -32px;\n  background-color: #1a1a1a;\n  color: #ffffff;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: 700;\n  border-radius: 0 0 4px 4px;\n}","",{version:3,sources:["webpack://./src/plugin.css"],names:[],mappings:"AAAA;EACE,kBAAkB;EAClB,wBAAwB;EACxB,yBAAyB;EACzB,0BAA0B;EAC1B,oBAAoB;AACtB;;AAEA;EACE,kBAAkB;EAClB,WAAW;EACX,YAAY;EACZ,aAAa;EACb,yBAAyB;EACzB,cAAc;EACd,aAAa;EACb,mBAAmB;EACnB,uBAAuB;EACvB,gBAAgB;EAChB,0BAA0B;AAC5B",sourcesContent:[".vjs-vtt-thumbnail-holder {\n  position: absolute;\n  transition: opacity 0.2s;\n  bottom: calc(100% + 24px);\n  border-radius: 4px 4px 0 0;\n  pointer-events: none;\n}\n\n.vjs-vtt-thumbnail-timestamp {\n  position: absolute;\n  width: 100%;\n  height: 32px;\n  bottom: -32px;\n  background-color: #1a1a1a;\n  color: #ffffff;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: 700;\n  border-radius: 0 0 4px 4px;\n}"],sourceRoot:""}]);const a=i},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(r){!function(t,e,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var s=void 0!==r.layer;s&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,s&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var o=r.sourceMap;o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(n,t,e.options)}(e,t,r)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},963:t=>{t.exports=function(t){var e=t[1],r=t[3];if(!r)return e;if("function"==typeof btoa){var n=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),o="/*# ".concat(s," */");return[e].concat([o]).join("\n")}return[e].join("\n")}}},e={};function r(n){var s=e[n];if(void 0!==s)return s.exports;var o=e[n]={id:n,exports:{}};return t[n](o,o.exports,r),o.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.nc=void 0;const n=require("video.js");var s=r.n(n),o=r(72),i=r.n(o),a=r(825),c=r.n(a),u=r(659),l=r.n(u),p=r(56),d=r.n(p),h=r(540),m=r.n(h),f=r(113),v=r.n(f),g=r(818),A={};A.styleTagTransform=v(),A.setAttributes=d(),A.insert=l().bind(null,"head"),A.domAPI=c(),A.insertStyleElement=m(),i()(g.A,A),g.A&&g.A.locals&&g.A.locals;const b=s().getPlugin("plugin");class y extends b{constructor(t,e){super(t,e),e.vttSrc?(this.vttSrc=e.vttSrc,this.getVttData(),this.createThumbnailPreview()):console.error("No source file exists!")}getVttData(){fetch(this.vttSrc).then(t=>t.text()).then(t=>{this.vttData=this.processVttPayload(t)}).catch(t=>{console.error("Error fetching VTT file:",t)})}processVttPayload(t){const e=[],r=t.split("\n");let n=0;for(;n<r.length;){const t=r[n].trim();if(t&&!t.startsWith("WEBVTT")){const s=t.match(/(\d{2}:\d{2}:\d{2}\.\d{3}) --> (\d{2}:\d{2}:\d{2}\.\d{3})/);if(s){const t=this.getSecondsFromTimestamp(s[1]),o=this.getSecondsFromTimestamp(s[2]);n++;const i=r[n].trim(),a=i.match(/#xywh=(\d+),(\d+),(\d+),(\d+)/);if(a){const[,r,n,s,c]=a,u={backgroundImage:`url(${i.split("#")[0]})`,backgroundPosition:`-${r}px -${n}px`,width:`${s}px`,height:`${c}px`};e.push({start:t,end:o,css:u})}}else console.error("malformated time code: ",t)}n++}return e}createThumbnailPreview(){if(this.thumbHolder=document.createElement("div"),this.thumbHolder.setAttribute("class","vjs-vtt-thumbnail-holder"),this.timestampLabel=document.createElement("div"),this.timestampLabel.setAttribute("class","vjs-vtt-thumbnail-timestamp"),this.thumbHolder.appendChild(this.timestampLabel),this.progressBar=this.player.$(".vjs-progress-control"),!this.progressBar)return;this.progressBar.appendChild(this.thumbHolder);const t=this.player.$(".vjs-mouse-display");t&&t.classList.add("vjs-hidden"),this.progressBar.addEventListener("mouseenter",this.onProgressBarMouseEnter),this.progressBar.addEventListener("mouseleave",this.onProgressBarMouseLeave)}onProgressBarMouseEnter=()=>{this.progressBar.addEventListener("mousemove",this.onProgressBarMouseMove),this.showThumbnailHolder()};onProgressBarMouseLeave=()=>{this.progressBar.removeEventListener("mousemove",this.onProgressBarMouseMove),this.hideThumbnailHolder()};onProgressBarMouseMove=t=>{const e=this.player.duration(),r=s().dom.getPointerPosition(this.progressBar,t).x,n=s().time.formatTime(r*e,e);this.timestampLabel.innerHTML=n.toString();const o=r*e,i=this.getStyleForTime(o);for(const t in i)i.hasOwnProperty(t)&&(this.thumbHolder.style[t]=i[t]);const a=this.thumbHolder.getBoundingClientRect().width/2,c=this.progressBar.offsetWidth,u=r*c;this.thumbHolder.style.transform=u<a?"translateX(0)":c-u<a?`translateX(${c-2*a}px)`:`translateX(${u-a}px)`};getStyleForTime(t){if(!this.vttData)return{};for(let e=0;e<this.vttData.length;e++){const r=this.vttData[e];if(t>=r.start&&t<=r.end)return r.css}return{}}getSecondsFromTimestamp(t){const e=t.split(":"),r=parseInt(e[0],10),n=parseInt(e[1],10),s=e[2].split(".");return 3600*r+60*n+parseInt(s[0],10)+parseInt(s[1],10)/1e3}showThumbnailHolder(){this.thumbHolder.style.display="block"}hideThumbnailHolder(){this.thumbHolder.style.display="none"}dispose(){this.progressBar.removeEventListener("mouseenter",this.onProgressBarMouseEnter),this.progressBar.removeEventListener("mouseleave",this.onProgressBarMouseLeave),super.dispose()}}s().registerPlugin("vttPreviewThumbnail",y),y.VERSION="1.0.2"})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixNQUFNQyxFQUFRRCxFQUFhaEQsTUFBTSxLQUMzQmtELEVBQVFDLFNBQVNGLEVBQU0sR0FBSSxJQUMzQkcsRUFBVUQsU0FBU0YsRUFBTSxHQUFJLElBQzdCSSxFQUFlSixFQUFNLEdBQUdqRCxNQUFNLEtBR3BDLE9BQWUsS0FBUmtELEVBQXlCLEdBQVZFLEVBRk5ELFNBQVNFLEVBQWEsR0FBSSxJQUNyQkYsU0FBU0UsRUFBYSxHQUFJLElBQU0sR0FFdkQsQ0FFQXpCLG1CQUFBQSxHQUNFMUgsS0FBSytHLFlBQVl2RixNQUFNNEgsUUFBVSxPQUNuQyxDQUVBeEIsbUJBQUFBLEdBQ0U1SCxLQUFLK0csWUFBWXZGLE1BQU00SCxRQUFVLE1BQ25DLENBRUFDLE9BQUFBLEdBQ0VySixLQUFLaUgsWUFBWVUsb0JBQW9CLGFBQWMzSCxLQUFLdUgseUJBQ3hEdkgsS0FBS2lILFlBQVlVLG9CQUFvQixhQUFjM0gsS0FBS3dILHlCQUN4RHpDLE1BQU1zRSxTQUNSLEVBR0YxRSxJQUFBQSxlQUF1QixzQkFBdUJDLEdBQzlDQSxFQUFvQjBFLFEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aWRlb2pzLXZ0dC1wcmV2aWV3LXRodW1ibmFpbC8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3NldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlcy5qcyIsIndlYnBhY2s6Ly92aWRlb2pzLXZ0dC1wcmV2aWV3LXRodW1ibmFpbC8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qcyIsIndlYnBhY2s6Ly92aWRlb2pzLXZ0dC1wcmV2aWV3LXRodW1ibmFpbC8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanMiLCJ3ZWJwYWNrOi8vdmlkZW9qcy12dHQtcHJldmlldy10aHVtYm5haWwvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZVRhZ1RyYW5zZm9ybS5qcyIsIndlYnBhY2s6Ly92aWRlb2pzLXZ0dC1wcmV2aWV3LXRodW1ibmFpbC8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydFN0eWxlRWxlbWVudC5qcyIsIndlYnBhY2s6Ly92aWRlb2pzLXZ0dC1wcmV2aWV3LXRodW1ibmFpbC8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydEJ5U2VsZWN0b3IuanMiLCJ3ZWJwYWNrOi8vdmlkZW9qcy12dHQtcHJldmlldy10aHVtYm5haWwvLi9zcmMvcGx1Z2luLmNzcyIsIndlYnBhY2s6Ly92aWRlb2pzLXZ0dC1wcmV2aWV3LXRodW1ibmFpbC8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlRG9tQVBJLmpzIiwid2VicGFjazovL3ZpZGVvanMtdnR0LXByZXZpZXctdGh1bWJuYWlsLy4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL3NvdXJjZU1hcHMuanMiLCJ3ZWJwYWNrOi8vdmlkZW9qcy12dHQtcHJldmlldy10aHVtYm5haWwvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdmlkZW9qcy12dHQtcHJldmlldy10aHVtYm5haWwvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vdmlkZW9qcy12dHQtcHJldmlldy10aHVtYm5haWwvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3ZpZGVvanMtdnR0LXByZXZpZXctdGh1bWJuYWlsL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vdmlkZW9qcy12dHQtcHJldmlldy10aHVtYm5haWwvd2VicGFjay9ydW50aW1lL25vbmNlIiwid2VicGFjazovL3ZpZGVvanMtdnR0LXByZXZpZXctdGh1bWJuYWlsL2V4dGVybmFsIGNvbW1vbmpzIFwidmlkZW8uanNcIiIsIndlYnBhY2s6Ly92aWRlb2pzLXZ0dC1wcmV2aWV3LXRodW1ibmFpbC8uL3NyYy9wbHVnaW4uY3NzP2Q0ZDEiLCJ3ZWJwYWNrOi8vdmlkZW9qcy12dHQtcHJldmlldy10aHVtYm5haWwvLi9zcmMvcGx1Z2luLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIHNldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlcyhzdHlsZUVsZW1lbnQpIHtcbiAgdmFyIG5vbmNlID0gdHlwZW9mIF9fd2VicGFja19ub25jZV9fICE9PSBcInVuZGVmaW5lZFwiID8gX193ZWJwYWNrX25vbmNlX18gOiBudWxsO1xuICBpZiAobm9uY2UpIHtcbiAgICBzdHlsZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwibm9uY2VcIiwgbm9uY2UpO1xuICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9IHNldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlczsiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIHN0eWxlc0luRE9NID0gW107XG5mdW5jdGlvbiBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKSB7XG4gIHZhciByZXN1bHQgPSAtMTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXNJbkRPTS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChzdHlsZXNJbkRPTVtpXS5pZGVudGlmaWVyID09PSBpZGVudGlmaWVyKSB7XG4gICAgICByZXN1bHQgPSBpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBtb2R1bGVzVG9Eb20obGlzdCwgb3B0aW9ucykge1xuICB2YXIgaWRDb3VudE1hcCA9IHt9O1xuICB2YXIgaWRlbnRpZmllcnMgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSBsaXN0W2ldO1xuICAgIHZhciBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdO1xuICAgIHZhciBjb3VudCA9IGlkQ291bnRNYXBbaWRdIHx8IDA7XG4gICAgdmFyIGlkZW50aWZpZXIgPSBcIlwiLmNvbmNhdChpZCwgXCIgXCIpLmNvbmNhdChjb3VudCk7XG4gICAgaWRDb3VudE1hcFtpZF0gPSBjb3VudCArIDE7XG4gICAgdmFyIGluZGV4QnlJZGVudGlmaWVyID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgdmFyIG9iaiA9IHtcbiAgICAgIGNzczogaXRlbVsxXSxcbiAgICAgIG1lZGlhOiBpdGVtWzJdLFxuICAgICAgc291cmNlTWFwOiBpdGVtWzNdLFxuICAgICAgc3VwcG9ydHM6IGl0ZW1bNF0sXG4gICAgICBsYXllcjogaXRlbVs1XVxuICAgIH07XG4gICAgaWYgKGluZGV4QnlJZGVudGlmaWVyICE9PSAtMSkge1xuICAgICAgc3R5bGVzSW5ET01baW5kZXhCeUlkZW50aWZpZXJdLnJlZmVyZW5jZXMrKztcbiAgICAgIHN0eWxlc0luRE9NW2luZGV4QnlJZGVudGlmaWVyXS51cGRhdGVyKG9iaik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciB1cGRhdGVyID0gYWRkRWxlbWVudFN0eWxlKG9iaiwgb3B0aW9ucyk7XG4gICAgICBvcHRpb25zLmJ5SW5kZXggPSBpO1xuICAgICAgc3R5bGVzSW5ET00uc3BsaWNlKGksIDAsIHtcbiAgICAgICAgaWRlbnRpZmllcjogaWRlbnRpZmllcixcbiAgICAgICAgdXBkYXRlcjogdXBkYXRlcixcbiAgICAgICAgcmVmZXJlbmNlczogMVxuICAgICAgfSk7XG4gICAgfVxuICAgIGlkZW50aWZpZXJzLnB1c2goaWRlbnRpZmllcik7XG4gIH1cbiAgcmV0dXJuIGlkZW50aWZpZXJzO1xufVxuZnVuY3Rpb24gYWRkRWxlbWVudFN0eWxlKG9iaiwgb3B0aW9ucykge1xuICB2YXIgYXBpID0gb3B0aW9ucy5kb21BUEkob3B0aW9ucyk7XG4gIGFwaS51cGRhdGUob2JqKTtcbiAgdmFyIHVwZGF0ZXIgPSBmdW5jdGlvbiB1cGRhdGVyKG5ld09iaikge1xuICAgIGlmIChuZXdPYmopIHtcbiAgICAgIGlmIChuZXdPYmouY3NzID09PSBvYmouY3NzICYmIG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmIG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXAgJiYgbmV3T2JqLnN1cHBvcnRzID09PSBvYmouc3VwcG9ydHMgJiYgbmV3T2JqLmxheWVyID09PSBvYmoubGF5ZXIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgYXBpLnVwZGF0ZShvYmogPSBuZXdPYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICBhcGkucmVtb3ZlKCk7XG4gICAgfVxuICB9O1xuICByZXR1cm4gdXBkYXRlcjtcbn1cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGxpc3QsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIGxpc3QgPSBsaXN0IHx8IFtdO1xuICB2YXIgbGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlKG5ld0xpc3QpIHtcbiAgICBuZXdMaXN0ID0gbmV3TGlzdCB8fCBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGlkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbaV07XG4gICAgICB2YXIgaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKTtcbiAgICAgIHN0eWxlc0luRE9NW2luZGV4XS5yZWZlcmVuY2VzLS07XG4gICAgfVxuICAgIHZhciBuZXdMYXN0SWRlbnRpZmllcnMgPSBtb2R1bGVzVG9Eb20obmV3TGlzdCwgb3B0aW9ucyk7XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBfaWRlbnRpZmllciA9IGxhc3RJZGVudGlmaWVyc1tfaV07XG4gICAgICB2YXIgX2luZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoX2lkZW50aWZpZXIpO1xuICAgICAgaWYgKHN0eWxlc0luRE9NW19pbmRleF0ucmVmZXJlbmNlcyA9PT0gMCkge1xuICAgICAgICBzdHlsZXNJbkRPTVtfaW5kZXhdLnVwZGF0ZXIoKTtcbiAgICAgICAgc3R5bGVzSW5ET00uc3BsaWNlKF9pbmRleCwgMSk7XG4gICAgICB9XG4gICAgfVxuICAgIGxhc3RJZGVudGlmaWVycyA9IG5ld0xhc3RJZGVudGlmaWVycztcbiAgfTtcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qXG4gIE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG4gIEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcbiovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKSB7XG4gIHZhciBsaXN0ID0gW107XG5cbiAgLy8gcmV0dXJuIHRoZSBsaXN0IG9mIG1vZHVsZXMgYXMgY3NzIHN0cmluZ1xuICBsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICB2YXIgY29udGVudCA9IFwiXCI7XG4gICAgICB2YXIgbmVlZExheWVyID0gdHlwZW9mIGl0ZW1bNV0gIT09IFwidW5kZWZpbmVkXCI7XG4gICAgICBpZiAoaXRlbVs0XSkge1xuICAgICAgICBjb250ZW50ICs9IFwiQHN1cHBvcnRzIChcIi5jb25jYXQoaXRlbVs0XSwgXCIpIHtcIik7XG4gICAgICB9XG4gICAgICBpZiAoaXRlbVsyXSkge1xuICAgICAgICBjb250ZW50ICs9IFwiQG1lZGlhIFwiLmNvbmNhdChpdGVtWzJdLCBcIiB7XCIpO1xuICAgICAgfVxuICAgICAgaWYgKG5lZWRMYXllcikge1xuICAgICAgICBjb250ZW50ICs9IFwiQGxheWVyXCIuY29uY2F0KGl0ZW1bNV0ubGVuZ3RoID4gMCA/IFwiIFwiLmNvbmNhdChpdGVtWzVdKSA6IFwiXCIsIFwiIHtcIik7XG4gICAgICB9XG4gICAgICBjb250ZW50ICs9IGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSk7XG4gICAgICBpZiAobmVlZExheWVyKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJ9XCI7XG4gICAgICB9XG4gICAgICBpZiAoaXRlbVsyXSkge1xuICAgICAgICBjb250ZW50ICs9IFwifVwiO1xuICAgICAgfVxuICAgICAgaWYgKGl0ZW1bNF0pIHtcbiAgICAgICAgY29udGVudCArPSBcIn1cIjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH0pLmpvaW4oXCJcIik7XG4gIH07XG5cbiAgLy8gaW1wb3J0IGEgbGlzdCBvZiBtb2R1bGVzIGludG8gdGhlIGxpc3RcbiAgbGlzdC5pID0gZnVuY3Rpb24gaShtb2R1bGVzLCBtZWRpYSwgZGVkdXBlLCBzdXBwb3J0cywgbGF5ZXIpIHtcbiAgICBpZiAodHlwZW9mIG1vZHVsZXMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIG1vZHVsZXMgPSBbW251bGwsIG1vZHVsZXMsIHVuZGVmaW5lZF1dO1xuICAgIH1cbiAgICB2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9O1xuICAgIGlmIChkZWR1cGUpIHtcbiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgdGhpcy5sZW5ndGg7IGsrKykge1xuICAgICAgICB2YXIgaWQgPSB0aGlzW2tdWzBdO1xuICAgICAgICBpZiAoaWQgIT0gbnVsbCkge1xuICAgICAgICAgIGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaWRdID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKHZhciBfayA9IDA7IF9rIDwgbW9kdWxlcy5sZW5ndGg7IF9rKyspIHtcbiAgICAgIHZhciBpdGVtID0gW10uY29uY2F0KG1vZHVsZXNbX2tdKTtcbiAgICAgIGlmIChkZWR1cGUgJiYgYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpdGVtWzBdXSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgbGF5ZXIgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpdGVtWzVdID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgaXRlbVs1XSA9IGxheWVyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1bMV0gPSBcIkBsYXllclwiLmNvbmNhdChpdGVtWzVdLmxlbmd0aCA+IDAgPyBcIiBcIi5jb25jYXQoaXRlbVs1XSkgOiBcIlwiLCBcIiB7XCIpLmNvbmNhdChpdGVtWzFdLCBcIn1cIik7XG4gICAgICAgICAgaXRlbVs1XSA9IGxheWVyO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAobWVkaWEpIHtcbiAgICAgICAgaWYgKCFpdGVtWzJdKSB7XG4gICAgICAgICAgaXRlbVsyXSA9IG1lZGlhO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1bMV0gPSBcIkBtZWRpYSBcIi5jb25jYXQoaXRlbVsyXSwgXCIge1wiKS5jb25jYXQoaXRlbVsxXSwgXCJ9XCIpO1xuICAgICAgICAgIGl0ZW1bMl0gPSBtZWRpYTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHN1cHBvcnRzKSB7XG4gICAgICAgIGlmICghaXRlbVs0XSkge1xuICAgICAgICAgIGl0ZW1bNF0gPSBcIlwiLmNvbmNhdChzdXBwb3J0cyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbVsxXSA9IFwiQHN1cHBvcnRzIChcIi5jb25jYXQoaXRlbVs0XSwgXCIpIHtcIikuY29uY2F0KGl0ZW1bMV0sIFwifVwiKTtcbiAgICAgICAgICBpdGVtWzRdID0gc3VwcG9ydHM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGxpc3QucHVzaChpdGVtKTtcbiAgICB9XG4gIH07XG4gIHJldHVybiBsaXN0O1xufTsiLCJcInVzZSBzdHJpY3RcIjtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBzdHlsZVRhZ1RyYW5zZm9ybShjc3MsIHN0eWxlRWxlbWVudCkge1xuICBpZiAoc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZUVsZW1lbnQuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuICB9IGVsc2Uge1xuICAgIHdoaWxlIChzdHlsZUVsZW1lbnQuZmlyc3RDaGlsZCkge1xuICAgICAgc3R5bGVFbGVtZW50LnJlbW92ZUNoaWxkKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKTtcbiAgICB9XG4gICAgc3R5bGVFbGVtZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xuICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9IHN0eWxlVGFnVHJhbnNmb3JtOyIsIlwidXNlIHN0cmljdFwiO1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKSB7XG4gIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuICBvcHRpb25zLnNldEF0dHJpYnV0ZXMoZWxlbWVudCwgb3B0aW9ucy5hdHRyaWJ1dGVzKTtcbiAgb3B0aW9ucy5pbnNlcnQoZWxlbWVudCwgb3B0aW9ucy5vcHRpb25zKTtcbiAgcmV0dXJuIGVsZW1lbnQ7XG59XG5tb2R1bGUuZXhwb3J0cyA9IGluc2VydFN0eWxlRWxlbWVudDsiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIG1lbW8gPSB7fTtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBnZXRUYXJnZXQodGFyZ2V0KSB7XG4gIGlmICh0eXBlb2YgbWVtb1t0YXJnZXRdID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgdmFyIHN0eWxlVGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpO1xuXG4gICAgLy8gU3BlY2lhbCBjYXNlIHRvIHJldHVybiBoZWFkIG9mIGlmcmFtZSBpbnN0ZWFkIG9mIGlmcmFtZSBpdHNlbGZcbiAgICBpZiAod2luZG93LkhUTUxJRnJhbWVFbGVtZW50ICYmIHN0eWxlVGFyZ2V0IGluc3RhbmNlb2Ygd2luZG93LkhUTUxJRnJhbWVFbGVtZW50KSB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBUaGlzIHdpbGwgdGhyb3cgYW4gZXhjZXB0aW9uIGlmIGFjY2VzcyB0byBpZnJhbWUgaXMgYmxvY2tlZFxuICAgICAgICAvLyBkdWUgdG8gY3Jvc3Mtb3JpZ2luIHJlc3RyaWN0aW9uc1xuICAgICAgICBzdHlsZVRhcmdldCA9IHN0eWxlVGFyZ2V0LmNvbnRlbnREb2N1bWVudC5oZWFkO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBpc3RhbmJ1bCBpZ25vcmUgbmV4dFxuICAgICAgICBzdHlsZVRhcmdldCA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICAgIG1lbW9bdGFyZ2V0XSA9IHN0eWxlVGFyZ2V0O1xuICB9XG4gIHJldHVybiBtZW1vW3RhcmdldF07XG59XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gaW5zZXJ0QnlTZWxlY3RvcihpbnNlcnQsIHN0eWxlKSB7XG4gIHZhciB0YXJnZXQgPSBnZXRUYXJnZXQoaW5zZXJ0KTtcbiAgaWYgKCF0YXJnZXQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBmaW5kIGEgc3R5bGUgdGFyZ2V0LiBUaGlzIHByb2JhYmx5IG1lYW5zIHRoYXQgdGhlIHZhbHVlIGZvciB0aGUgJ2luc2VydCcgcGFyYW1ldGVyIGlzIGludmFsaWQuXCIpO1xuICB9XG4gIHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG59XG5tb2R1bGUuZXhwb3J0cyA9IGluc2VydEJ5U2VsZWN0b3I7IiwiLy8gSW1wb3J0c1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18gZnJvbSBcIi4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9zb3VyY2VNYXBzLmpzXCI7XG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fIGZyb20gXCIuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCI7XG52YXIgX19fQ1NTX0xPQURFUl9FWFBPUlRfX18gPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyk7XG4vLyBNb2R1bGVcbl9fX0NTU19MT0FERVJfRVhQT1JUX19fLnB1c2goW21vZHVsZS5pZCwgYC52anMtdnR0LXRodW1ibmFpbC1ob2xkZXIge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRyYW5zaXRpb246IG9wYWNpdHkgMC4ycztcbiAgYm90dG9tOiBjYWxjKDEwMCUgKyAyNHB4KTtcbiAgYm9yZGVyLXJhZGl1czogNHB4IDRweCAwIDA7XG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xufVxuXG4udmpzLXZ0dC10aHVtYm5haWwtdGltZXN0YW1wIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAzMnB4O1xuICBib3R0b206IC0zMnB4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMWExYTFhO1xuICBjb2xvcjogI2ZmZmZmZjtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGZvbnQtd2VpZ2h0OiA3MDA7XG4gIGJvcmRlci1yYWRpdXM6IDAgMCA0cHggNHB4O1xufWAsIFwiXCIse1widmVyc2lvblwiOjMsXCJzb3VyY2VzXCI6W1wid2VicGFjazovLy4vc3JjL3BsdWdpbi5jc3NcIl0sXCJuYW1lc1wiOltdLFwibWFwcGluZ3NcIjpcIkFBQUE7RUFDRSxrQkFBa0I7RUFDbEIsd0JBQXdCO0VBQ3hCLHlCQUF5QjtFQUN6QiwwQkFBMEI7RUFDMUIsb0JBQW9CO0FBQ3RCOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFdBQVc7RUFDWCxZQUFZO0VBQ1osYUFBYTtFQUNiLHlCQUF5QjtFQUN6QixjQUFjO0VBQ2QsYUFBYTtFQUNiLG1CQUFtQjtFQUNuQix1QkFBdUI7RUFDdkIsZ0JBQWdCO0VBQ2hCLDBCQUEwQjtBQUM1QlwiLFwic291cmNlc0NvbnRlbnRcIjpbXCIudmpzLXZ0dC10aHVtYm5haWwtaG9sZGVyIHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIHRyYW5zaXRpb246IG9wYWNpdHkgMC4ycztcXG4gIGJvdHRvbTogY2FsYygxMDAlICsgMjRweCk7XFxuICBib3JkZXItcmFkaXVzOiA0cHggNHB4IDAgMDtcXG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xcbn1cXG5cXG4udmpzLXZ0dC10aHVtYm5haWwtdGltZXN0YW1wIHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIHdpZHRoOiAxMDAlO1xcbiAgaGVpZ2h0OiAzMnB4O1xcbiAgYm90dG9tOiAtMzJweDtcXG4gIGJhY2tncm91bmQtY29sb3I6ICMxYTFhMWE7XFxuICBjb2xvcjogI2ZmZmZmZjtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBhbGlnbi1pdGVtczogY2VudGVyO1xcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XFxuICBmb250LXdlaWdodDogNzAwO1xcbiAgYm9yZGVyLXJhZGl1czogMCAwIDRweCA0cHg7XFxufVwiXSxcInNvdXJjZVJvb3RcIjpcIlwifV0pO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgX19fQ1NTX0xPQURFUl9FWFBPUlRfX187XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBhcHBseShzdHlsZUVsZW1lbnQsIG9wdGlvbnMsIG9iaikge1xuICB2YXIgY3NzID0gXCJcIjtcbiAgaWYgKG9iai5zdXBwb3J0cykge1xuICAgIGNzcyArPSBcIkBzdXBwb3J0cyAoXCIuY29uY2F0KG9iai5zdXBwb3J0cywgXCIpIHtcIik7XG4gIH1cbiAgaWYgKG9iai5tZWRpYSkge1xuICAgIGNzcyArPSBcIkBtZWRpYSBcIi5jb25jYXQob2JqLm1lZGlhLCBcIiB7XCIpO1xuICB9XG4gIHZhciBuZWVkTGF5ZXIgPSB0eXBlb2Ygb2JqLmxheWVyICE9PSBcInVuZGVmaW5lZFwiO1xuICBpZiAobmVlZExheWVyKSB7XG4gICAgY3NzICs9IFwiQGxheWVyXCIuY29uY2F0KG9iai5sYXllci5sZW5ndGggPiAwID8gXCIgXCIuY29uY2F0KG9iai5sYXllcikgOiBcIlwiLCBcIiB7XCIpO1xuICB9XG4gIGNzcyArPSBvYmouY3NzO1xuICBpZiAobmVlZExheWVyKSB7XG4gICAgY3NzICs9IFwifVwiO1xuICB9XG4gIGlmIChvYmoubWVkaWEpIHtcbiAgICBjc3MgKz0gXCJ9XCI7XG4gIH1cbiAgaWYgKG9iai5zdXBwb3J0cykge1xuICAgIGNzcyArPSBcIn1cIjtcbiAgfVxuICB2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcbiAgaWYgKHNvdXJjZU1hcCAmJiB0eXBlb2YgYnRvYSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIGNzcyArPSBcIlxcbi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsXCIuY29uY2F0KGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSksIFwiICovXCIpO1xuICB9XG5cbiAgLy8gRm9yIG9sZCBJRVxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgICovXG4gIG9wdGlvbnMuc3R5bGVUYWdUcmFuc2Zvcm0oY3NzLCBzdHlsZUVsZW1lbnQsIG9wdGlvbnMub3B0aW9ucyk7XG59XG5mdW5jdGlvbiByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGVFbGVtZW50KSB7XG4gIC8vIGlzdGFuYnVsIGlnbm9yZSBpZlxuICBpZiAoc3R5bGVFbGVtZW50LnBhcmVudE5vZGUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgc3R5bGVFbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGVFbGVtZW50KTtcbn1cblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBkb21BUEkob3B0aW9ucykge1xuICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKCkge30sXG4gICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHt9XG4gICAgfTtcbiAgfVxuICB2YXIgc3R5bGVFbGVtZW50ID0gb3B0aW9ucy5pbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucyk7XG4gIHJldHVybiB7XG4gICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUob2JqKSB7XG4gICAgICBhcHBseShzdHlsZUVsZW1lbnQsIG9wdGlvbnMsIG9iaik7XG4gICAgfSxcbiAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICAgIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZUVsZW1lbnQpO1xuICAgIH1cbiAgfTtcbn1cbm1vZHVsZS5leHBvcnRzID0gZG9tQVBJOyIsIlwidXNlIHN0cmljdFwiO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gIHZhciBjb250ZW50ID0gaXRlbVsxXTtcbiAgdmFyIGNzc01hcHBpbmcgPSBpdGVtWzNdO1xuICBpZiAoIWNzc01hcHBpbmcpIHtcbiAgICByZXR1cm4gY29udGVudDtcbiAgfVxuICBpZiAodHlwZW9mIGJ0b2EgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIHZhciBiYXNlNjQgPSBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShjc3NNYXBwaW5nKSkpKTtcbiAgICB2YXIgZGF0YSA9IFwic291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsXCIuY29uY2F0KGJhc2U2NCk7XG4gICAgdmFyIHNvdXJjZU1hcHBpbmcgPSBcIi8qIyBcIi5jb25jYXQoZGF0YSwgXCIgKi9cIik7XG4gICAgcmV0dXJuIFtjb250ZW50XS5jb25jYXQoW3NvdXJjZU1hcHBpbmddKS5qb2luKFwiXFxuXCIpO1xuICB9XG4gIHJldHVybiBbY29udGVudF0uam9pbihcIlxcblwiKTtcbn07IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHRpZDogbW9kdWxlSWQsXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIl9fd2VicGFja19yZXF1aXJlX18ubmMgPSB1bmRlZmluZWQ7IiwiY29uc3QgX19XRUJQQUNLX05BTUVTUEFDRV9PQkpFQ1RfXyA9IHJlcXVpcmUoXCJ2aWRlby5qc1wiKTsiLCJcbiAgICAgIGltcG9ydCBBUEkgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIjtcbiAgICAgIGltcG9ydCBkb21BUEkgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZURvbUFQSS5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydEZuIGZyb20gXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0QnlTZWxlY3Rvci5qc1wiO1xuICAgICAgaW1wb3J0IHNldEF0dHJpYnV0ZXMgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRTdHlsZUVsZW1lbnQgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanNcIjtcbiAgICAgIGltcG9ydCBzdHlsZVRhZ1RyYW5zZm9ybUZuIGZyb20gXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVUYWdUcmFuc2Zvcm0uanNcIjtcbiAgICAgIGltcG9ydCBjb250ZW50LCAqIGFzIG5hbWVkRXhwb3J0IGZyb20gXCIhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vcGx1Z2luLmNzc1wiO1xuICAgICAgXG4gICAgICBcblxudmFyIG9wdGlvbnMgPSB7fTtcblxub3B0aW9ucy5zdHlsZVRhZ1RyYW5zZm9ybSA9IHN0eWxlVGFnVHJhbnNmb3JtRm47XG5vcHRpb25zLnNldEF0dHJpYnV0ZXMgPSBzZXRBdHRyaWJ1dGVzO1xub3B0aW9ucy5pbnNlcnQgPSBpbnNlcnRGbi5iaW5kKG51bGwsIFwiaGVhZFwiKTtcbm9wdGlvbnMuZG9tQVBJID0gZG9tQVBJO1xub3B0aW9ucy5pbnNlcnRTdHlsZUVsZW1lbnQgPSBpbnNlcnRTdHlsZUVsZW1lbnQ7XG5cbnZhciB1cGRhdGUgPSBBUEkoY29udGVudCwgb3B0aW9ucyk7XG5cblxuXG5leHBvcnQgKiBmcm9tIFwiISEuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL3BsdWdpbi5jc3NcIjtcbiAgICAgICBleHBvcnQgZGVmYXVsdCBjb250ZW50ICYmIGNvbnRlbnQubG9jYWxzID8gY29udGVudC5sb2NhbHMgOiB1bmRlZmluZWQ7XG4iLCJpbXBvcnQgdmlkZW9qcyBmcm9tICd2aWRlby5qcydcbmltcG9ydCBwYWNrYWdlSW5mbyBmcm9tICcuLi9wYWNrYWdlLmpzb24nXG5pbXBvcnQgJy4vcGx1Z2luLmNzcydcblxuY29uc3QgUGx1Z2luID0gdmlkZW9qcy5nZXRQbHVnaW4oJ3BsdWdpbicpXG5cbmNsYXNzIFZ0dFByZXZpZXdUaHVtYm5haWwgZXh0ZW5kcyBQbHVnaW4ge1xuICBjb25zdHJ1Y3RvcihwbGF5ZXIsIG9wdGlvbnMpIHtcbiAgICBzdXBlcihwbGF5ZXIsIG9wdGlvbnMpO1xuXG4gICAgaWYgKG9wdGlvbnMudnR0U3JjKSB7XG4gICAgICB0aGlzLnZ0dFNyYyA9IG9wdGlvbnMudnR0U3JjXG4gICAgICB0aGlzLmdldFZ0dERhdGEoKVxuICAgICAgdGhpcy5jcmVhdGVUaHVtYm5haWxQcmV2aWV3KClcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcignTm8gc291cmNlIGZpbGUgZXhpc3RzIScpXG4gICAgfVxuXG4gIH1cblxuICBnZXRWdHREYXRhKCkge1xuICAgIGZldGNoKHRoaXMudnR0U3JjKVxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UudGV4dCgpKVxuICAgICAgLnRoZW4oZGF0YSA9PiB7XG4gICAgICAgIHRoaXMudnR0RGF0YSA9IHRoaXMucHJvY2Vzc1Z0dFBheWxvYWQoZGF0YSlcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBWVFQgZmlsZTonLCBlcnJvcik7XG4gICAgICB9KTtcbiAgfVxuXG4gIHByb2Nlc3NWdHRQYXlsb2FkKGRhdGEpIHtcbiAgICBjb25zdCBjdWVzID0gW11cbiAgICBjb25zdCBsaW5lcyA9IGRhdGEuc3BsaXQoJ1xcbicpXG4gICAgbGV0IGkgPSAwXG5cbiAgICB3aGlsZSAoaSA8IGxpbmVzLmxlbmd0aCkge1xuICAgICAgY29uc3QgbGluZSA9IGxpbmVzW2ldLnRyaW0oKVxuXG4gICAgICBpZiAobGluZSAmJiAhbGluZS5zdGFydHNXaXRoKCdXRUJWVFQnKSkge1xuICAgICAgICBjb25zdCB0aW1lTWF0Y2ggPSBsaW5lLm1hdGNoKC8oXFxkezJ9OlxcZHsyfTpcXGR7Mn1cXC5cXGR7M30pIC0tPiAoXFxkezJ9OlxcZHsyfTpcXGR7Mn1cXC5cXGR7M30pLylcbiAgICAgICAgaWYgKHRpbWVNYXRjaCkge1xuICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5nZXRTZWNvbmRzRnJvbVRpbWVzdGFtcCh0aW1lTWF0Y2hbMV0pXG4gICAgICAgICAgY29uc3QgZW5kID0gdGhpcy5nZXRTZWNvbmRzRnJvbVRpbWVzdGFtcCh0aW1lTWF0Y2hbMl0pXG4gICAgICAgICAgaSsrXG4gICAgICAgICAgY29uc3QgaW1hZ2VVcmwgPSBsaW5lc1tpXS50cmltKClcbiAgICAgICAgICBjb25zdCBtYXRjaFhZV0ggPSBpbWFnZVVybC5tYXRjaCgvI3h5d2g9KFxcZCspLChcXGQrKSwoXFxkKyksKFxcZCspLyk7XG4gICAgICAgICAgaWYgKG1hdGNoWFlXSCkge1xuICAgICAgICAgICAgY29uc3QgWywgeCwgeSwgd2lkdGgsIGhlaWdodF0gPSBtYXRjaFhZV0hcbiAgICAgICAgICAgIGNvbnN0IGNzcyA9IHtcbiAgICAgICAgICAgICAgYmFja2dyb3VuZEltYWdlOiBgdXJsKCR7aW1hZ2VVcmwuc3BsaXQoJyMnKVswXX0pYCxcbiAgICAgICAgICAgICAgYmFja2dyb3VuZFBvc2l0aW9uOmAtJHt4fXB4IC0ke3l9cHhgLFxuICAgICAgICAgICAgICB3aWR0aDogYCR7d2lkdGh9cHhgLFxuICAgICAgICAgICAgICBoZWlnaHQ6IGAke2hlaWdodH1weGBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1ZXMucHVzaCh7IHN0YXJ0LCBlbmQsIGNzcyB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdtYWxmb3JtYXRlZCB0aW1lIGNvZGU6ICcsIGxpbmUpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGkrK1xuICAgIH1cbiAgICByZXR1cm4gY3Vlc1xuICB9XG5cbiAgY3JlYXRlVGh1bWJuYWlsUHJldmlldygpIHtcbiAgICB0aGlzLnRodW1iSG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICB0aGlzLnRodW1iSG9sZGVyLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAndmpzLXZ0dC10aHVtYm5haWwtaG9sZGVyJylcbiAgICB0aGlzLnRpbWVzdGFtcExhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICB0aGlzLnRpbWVzdGFtcExhYmVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAndmpzLXZ0dC10aHVtYm5haWwtdGltZXN0YW1wJylcbiAgICB0aGlzLnRodW1iSG9sZGVyLmFwcGVuZENoaWxkKHRoaXMudGltZXN0YW1wTGFiZWwpXG4gICAgdGhpcy5wcm9ncmVzc0JhciA9IHRoaXMucGxheWVyLiQoJy52anMtcHJvZ3Jlc3MtY29udHJvbCcpXG4gICAgaWYgKCF0aGlzLnByb2dyZXNzQmFyKSByZXR1cm5cbiAgXG4gICAgdGhpcy5wcm9ncmVzc0Jhci5hcHBlbmRDaGlsZCh0aGlzLnRodW1iSG9sZGVyKVxuICAgIC8vIGhpZGUgZGVmYXVsdCB0aW1lIHRvb2x0aXBcbiAgICBjb25zdCBkZWZhdWx0VGltZVRvb2x0aXAgPSB0aGlzLnBsYXllci4kKCcudmpzLW1vdXNlLWRpc3BsYXknKVxuICAgIGlmIChkZWZhdWx0VGltZVRvb2x0aXApIHtcbiAgICAgIGRlZmF1bHRUaW1lVG9vbHRpcC5jbGFzc0xpc3QuYWRkKCd2anMtaGlkZGVuJylcbiAgICB9XG5cbiAgICB0aGlzLnByb2dyZXNzQmFyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCB0aGlzLm9uUHJvZ3Jlc3NCYXJNb3VzZUVudGVyKVxuICAgIHRoaXMucHJvZ3Jlc3NCYXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIHRoaXMub25Qcm9ncmVzc0Jhck1vdXNlTGVhdmUpXG4gIH1cblxuICBvblByb2dyZXNzQmFyTW91c2VFbnRlciA9ICgpID0+IHtcbiAgICB0aGlzLnByb2dyZXNzQmFyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMub25Qcm9ncmVzc0Jhck1vdXNlTW92ZSlcbiAgICB0aGlzLnNob3dUaHVtYm5haWxIb2xkZXIoKVxuICB9XG5cbiAgb25Qcm9ncmVzc0Jhck1vdXNlTGVhdmUgPSAoKSA9PiB7XG4gICAgdGhpcy5wcm9ncmVzc0Jhci5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLm9uUHJvZ3Jlc3NCYXJNb3VzZU1vdmUpXG4gICAgdGhpcy5oaWRlVGh1bWJuYWlsSG9sZGVyKClcbiAgfVxuXG4gIG9uUHJvZ3Jlc3NCYXJNb3VzZU1vdmUgPSAoZXZlbnQpID0+IHtcbiAgICBjb25zdCBkdXJhdGlvbiA9IHRoaXMucGxheWVyLmR1cmF0aW9uKClcbiAgICBjb25zdCBwZXJjZW50ID0gdmlkZW9qcy5kb20uZ2V0UG9pbnRlclBvc2l0aW9uKHRoaXMucHJvZ3Jlc3NCYXIsIGV2ZW50KS54XG4gICAgY29uc3QgZm9ybWF0dGVkVGltZSA9IHZpZGVvanMudGltZS5mb3JtYXRUaW1lKHBlcmNlbnQgKiBkdXJhdGlvbiwgZHVyYXRpb24pXG4gICAgdGhpcy50aW1lc3RhbXBMYWJlbC5pbm5lckhUTUwgPSBmb3JtYXR0ZWRUaW1lLnRvU3RyaW5nKClcblxuICAgIGNvbnN0IHRpbWUgPSBwZXJjZW50ICogZHVyYXRpb25cbiAgICBjb25zdCBjdXJyZW50VGh1bWJuYWlsU3R5bGUgPSB0aGlzLmdldFN0eWxlRm9yVGltZSh0aW1lKVxuXG4gICAgZm9yIChjb25zdCBzdHlsZSBpbiBjdXJyZW50VGh1bWJuYWlsU3R5bGUpIHtcbiAgICAgIGlmIChjdXJyZW50VGh1bWJuYWlsU3R5bGUuaGFzT3duUHJvcGVydHkoc3R5bGUpKSB7XG4gICAgICAgIHRoaXMudGh1bWJIb2xkZXIuc3R5bGVbc3R5bGVdID0gY3VycmVudFRodW1ibmFpbFN0eWxlW3N0eWxlXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBQbGFjZSB0aHVtYm5haWwgYXQgY29ycmVjdCBwb3NpdGlvblxuICAgIGNvbnN0IGhhbGZUaHVtYm5haWxXaWR0aCA9IHRoaXMudGh1bWJIb2xkZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggLyAyXG4gICAgY29uc3QgcHJvZ3Jlc3NCYXJXaWR0aCA9IHRoaXMucHJvZ3Jlc3NCYXIub2Zmc2V0V2lkdGhcbiAgICBjb25zdCB4UG9zID0gcGVyY2VudCAqIHByb2dyZXNzQmFyV2lkdGhcbiAgICBpZiAoeFBvcyA8IGhhbGZUaHVtYm5haWxXaWR0aCkge1xuICAgICAgLy8gbW91c2UgaXMgbmVhciB0aGUgc3RhcnQgb2YgdmlkZW9cbiAgICAgIHRoaXMudGh1bWJIb2xkZXIuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoMClgXG4gICAgfSBlbHNlIGlmIChwcm9ncmVzc0JhcldpZHRoIC0geFBvcyA8IGhhbGZUaHVtYm5haWxXaWR0aCkge1xuICAgICAgLy8gbW91c2UgaXMgbmVhciB0aGUgZW5kIG9mIHZpZGVvXG4gICAgICB0aGlzLnRodW1iSG9sZGVyLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKCR7cHJvZ3Jlc3NCYXJXaWR0aCAtIGhhbGZUaHVtYm5haWxXaWR0aCoyfXB4KWBcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy50aHVtYkhvbGRlci5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgke3hQb3MgLSBoYWxmVGh1bWJuYWlsV2lkdGh9cHgpYFxuICAgIH1cbiAgfVxuXG4gIGdldFN0eWxlRm9yVGltZSh0aW1lKSB7XG4gICAgaWYgKCF0aGlzLnZ0dERhdGEpIHJldHVybiB7fVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnZ0dERhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGN1ZSA9IHRoaXMudnR0RGF0YVtpXVxuICAgICAgaWYgKHRpbWUgPj0gY3VlLnN0YXJ0ICYmIHRpbWUgPD0gY3VlLmVuZCkge1xuICAgICAgICByZXR1cm4gY3VlLmNzc1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7fVxuICB9XG5cblxuICBnZXRTZWNvbmRzRnJvbVRpbWVzdGFtcCh2dHRUaW1lc3RhbXApIHtcbiAgICBjb25zdCBwYXJ0cyA9IHZ0dFRpbWVzdGFtcC5zcGxpdCgnOicpXG4gICAgY29uc3QgaG91cnMgPSBwYXJzZUludChwYXJ0c1swXSwgMTApXG4gICAgY29uc3QgbWludXRlcyA9IHBhcnNlSW50KHBhcnRzWzFdLCAxMClcbiAgICBjb25zdCBzZWNvbmRzUGFydHMgPSBwYXJ0c1syXS5zcGxpdCgnLicpXG4gICAgY29uc3Qgc2Vjb25kcyA9IHBhcnNlSW50KHNlY29uZHNQYXJ0c1swXSwgMTApXG4gICAgY29uc3QgbWlsbGlzZWNvbmRzID0gcGFyc2VJbnQoc2Vjb25kc1BhcnRzWzFdLCAxMCkgLyAxMDAwXG4gICAgcmV0dXJuIGhvdXJzICogMzYwMCArIG1pbnV0ZXMgKiA2MCArIHNlY29uZHMgKyBtaWxsaXNlY29uZHNcbiAgfVxuXG4gIHNob3dUaHVtYm5haWxIb2xkZXIoKSB7XG4gICAgdGhpcy50aHVtYkhvbGRlci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgfVxuXG4gIGhpZGVUaHVtYm5haWxIb2xkZXIoKSB7XG4gICAgdGhpcy50aHVtYkhvbGRlci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICB9XG5cbiAgZGlzcG9zZSgpIHtcbiAgICB0aGlzLnByb2dyZXNzQmFyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCB0aGlzLm9uUHJvZ3Jlc3NCYXJNb3VzZUVudGVyKVxuICAgIHRoaXMucHJvZ3Jlc3NCYXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIHRoaXMub25Qcm9ncmVzc0Jhck1vdXNlTGVhdmUpXG4gICAgc3VwZXIuZGlzcG9zZSgpO1xuICB9XG59XG5cbnZpZGVvanMucmVnaXN0ZXJQbHVnaW4oJ3Z0dFByZXZpZXdUaHVtYm5haWwnLCBWdHRQcmV2aWV3VGh1bWJuYWlsKVxuVnR0UHJldmlld1RodW1ibmFpbC5WRVJTSU9OID0gcGFja2FnZUluZm8udmVyc2lvblxuXG5leHBvcnQgZGVmYXVsdCBWdHRQcmV2aWV3VGh1bWJuYWlsIl0sIm5hbWVzIjpbIm1vZHVsZSIsImV4cG9ydHMiLCJzdHlsZUVsZW1lbnQiLCJub25jZSIsInNldEF0dHJpYnV0ZSIsInN0eWxlc0luRE9NIiwiZ2V0SW5kZXhCeUlkZW50aWZpZXIiLCJpZGVudGlmaWVyIiwicmVzdWx0IiwiaSIsImxlbmd0aCIsIm1vZHVsZXNUb0RvbSIsImxpc3QiLCJvcHRpb25zIiwiaWRDb3VudE1hcCIsImlkZW50aWZpZXJzIiwiaXRlbSIsImlkIiwiYmFzZSIsImNvdW50IiwiY29uY2F0IiwiaW5kZXhCeUlkZW50aWZpZXIiLCJvYmoiLCJjc3MiLCJtZWRpYSIsInNvdXJjZU1hcCIsInN1cHBvcnRzIiwibGF5ZXIiLCJyZWZlcmVuY2VzIiwidXBkYXRlciIsImFkZEVsZW1lbnRTdHlsZSIsImJ5SW5kZXgiLCJzcGxpY2UiLCJwdXNoIiwiYXBpIiwiZG9tQVBJIiwidXBkYXRlIiwibmV3T2JqIiwicmVtb3ZlIiwibGFzdElkZW50aWZpZXJzIiwibmV3TGlzdCIsImluZGV4IiwibmV3TGFzdElkZW50aWZpZXJzIiwiX2kiLCJfaW5kZXgiLCJjc3NXaXRoTWFwcGluZ1RvU3RyaW5nIiwidG9TdHJpbmciLCJ0aGlzIiwibWFwIiwiY29udGVudCIsIm5lZWRMYXllciIsImpvaW4iLCJtb2R1bGVzIiwiZGVkdXBlIiwidW5kZWZpbmVkIiwiYWxyZWFkeUltcG9ydGVkTW9kdWxlcyIsImsiLCJfayIsInN0eWxlU2hlZXQiLCJjc3NUZXh0IiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwiYXBwZW5kQ2hpbGQiLCJkb2N1bWVudCIsImNyZWF0ZVRleHROb2RlIiwiZWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGVzIiwiYXR0cmlidXRlcyIsImluc2VydCIsIm1lbW8iLCJzdHlsZSIsInRhcmdldCIsInN0eWxlVGFyZ2V0IiwicXVlcnlTZWxlY3RvciIsIndpbmRvdyIsIkhUTUxJRnJhbWVFbGVtZW50IiwiY29udGVudERvY3VtZW50IiwiaGVhZCIsImUiLCJnZXRUYXJnZXQiLCJFcnJvciIsIl9fX0NTU19MT0FERVJfRVhQT1JUX19fIiwiaW5zZXJ0U3R5bGVFbGVtZW50IiwiYnRvYSIsInVuZXNjYXBlIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiSlNPTiIsInN0cmluZ2lmeSIsInN0eWxlVGFnVHJhbnNmb3JtIiwiYXBwbHkiLCJwYXJlbnROb2RlIiwicmVtb3ZlU3R5bGVFbGVtZW50IiwiY3NzTWFwcGluZyIsImJhc2U2NCIsImRhdGEiLCJzb3VyY2VNYXBwaW5nIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsIm4iLCJnZXR0ZXIiLCJfX2VzTW9kdWxlIiwiZCIsImEiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJuYyIsInJlcXVpcmUiLCJsb2NhbHMiLCJQbHVnaW4iLCJ2aWRlb2pzIiwiVnR0UHJldmlld1RodW1ibmFpbCIsImNvbnN0cnVjdG9yIiwicGxheWVyIiwic3VwZXIiLCJ2dHRTcmMiLCJnZXRWdHREYXRhIiwiY3JlYXRlVGh1bWJuYWlsUHJldmlldyIsImNvbnNvbGUiLCJlcnJvciIsImZldGNoIiwidGhlbiIsInJlc3BvbnNlIiwidGV4dCIsInZ0dERhdGEiLCJwcm9jZXNzVnR0UGF5bG9hZCIsImNhdGNoIiwiY3VlcyIsImxpbmVzIiwic3BsaXQiLCJsaW5lIiwidHJpbSIsInN0YXJ0c1dpdGgiLCJ0aW1lTWF0Y2giLCJtYXRjaCIsInN0YXJ0IiwiZ2V0U2Vjb25kc0Zyb21UaW1lc3RhbXAiLCJlbmQiLCJpbWFnZVVybCIsIm1hdGNoWFlXSCIsIngiLCJ5Iiwid2lkdGgiLCJoZWlnaHQiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJiYWNrZ3JvdW5kUG9zaXRpb24iLCJ0aHVtYkhvbGRlciIsInRpbWVzdGFtcExhYmVsIiwicHJvZ3Jlc3NCYXIiLCIkIiwiZGVmYXVsdFRpbWVUb29sdGlwIiwiY2xhc3NMaXN0IiwiYWRkIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9uUHJvZ3Jlc3NCYXJNb3VzZUVudGVyIiwib25Qcm9ncmVzc0Jhck1vdXNlTGVhdmUiLCJvblByb2dyZXNzQmFyTW91c2VNb3ZlIiwic2hvd1RodW1ibmFpbEhvbGRlciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJoaWRlVGh1bWJuYWlsSG9sZGVyIiwiZXZlbnQiLCJkdXJhdGlvbiIsInBlcmNlbnQiLCJnZXRQb2ludGVyUG9zaXRpb24iLCJmb3JtYXR0ZWRUaW1lIiwiZm9ybWF0VGltZSIsImlubmVySFRNTCIsInRpbWUiLCJjdXJyZW50VGh1bWJuYWlsU3R5bGUiLCJnZXRTdHlsZUZvclRpbWUiLCJoYWxmVGh1bWJuYWlsV2lkdGgiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJwcm9ncmVzc0JhcldpZHRoIiwib2Zmc2V0V2lkdGgiLCJ4UG9zIiwidHJhbnNmb3JtIiwiY3VlIiwidnR0VGltZXN0YW1wIiwicGFydHMiLCJob3VycyIsInBhcnNlSW50IiwibWludXRlcyIsInNlY29uZHNQYXJ0cyIsImRpc3BsYXkiLCJkaXNwb3NlIiwiVkVSU0lPTiJdLCJzb3VyY2VSb290IjoiIn0=